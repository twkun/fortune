/*!
 * Fortune.js
 * Version 4.2.8
 * MIT License
 * http://fortune.js.org
 */
!function e(r,t,n){function o(a,u){if(!t[a]){if(!r[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=t[a]={exports:{}};r[a][0].call(c.exports,function(e){var t=r[a][1][e];return o(t?t:e)},c,c.exports,e,r,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,r,t){(function(r){"use strict";function n(e,r,t){var n;return null===t?null===r:e?e.compare?0===e.compare(r,t):(n=d(w,function(r){return r[0]===e.prototype.constructor}),n?n[1](r,t):r===t):r===t}function o(e,r){return function(t){return e[v]?d(r,function(r){return n(e[g],t,r)}):n(e[g],t,r)}}function i(e,r,t){var n,i;for(n in r)if(i=r[n],Array.isArray(i)||(i=[i]),void 0===d(i,o(e[n],t[n])))return!1;return!0}function a(e,r,t){var n,o,i;for(n in r)if(o=t[n],i=e[n][v],r[n]){if(!o)return!1;if(i&&!o.length)return!1}else{if(o&&!i)return!1;if(i&&o.length)return!1}return!0}function u(e,r,t){var n,o,i,a,u,f,c={};for(n in r)if(o=e[n],i=o[g],a=o[v],i||a){if(u=r[n],f=t[n],null==f)return!1;if(a&&(f=f?f.length:0),c[n]||(c[n]=a?d(b,s(Number))[1]:i.compare||d(b,s(i))[1]),null!==u[0]&&c[n](f,u[0])<0)return!1;if(null!==u[1]&&c[n](u[1],f)<0)return!1}return!0}function s(e){return function(r){return r[0]===e.prototype.constructor}}function f(e,r){var t,n,o,i,a,u,f,c,l;return function(p,h){for(t in r){if(o=p[t],i=h[t],a=r[t],u=e[t],f=u[v],c=u[g],null===o)return 1;if(null===i)return-1;if(l=0,f)l=o.length-i.length;else if(c){if(n=c.compare||d(b,s(c))[1],!n)throw new Error('Missing "compare" function.');l=n(o,i)}if(0!==l)return a?l:-l}return 0}}var c=e("../../common/deep_equal"),l=e("../../common/message"),d=e("../../common/array/find"),p=e("../../common/errors"),h=p.BadRequestError,y=e("../../common/keys"),m=y.primary,g=y.type,v=y.isArray,w=[[Date,function(e,r){return e.getTime()===r.getTime()}],[r,function(e,r){return e.equals(r)}],[Object,function(e,r){return c(e,r)}]],b=[[Number,function(e,r){return e-r}],[String,function(e,r){return e===r?0:e>r?1:-1}],[Boolean,function(e,r){return e===r?0:e?1:-1}],[Date,function(e,r){return e.getTime()-r.getTime()}],[r,r.compare],[Object,function(){return 0}]];t.generateId=function(){return Date.now()+"-"+("00000000"+Math.floor(Math.random()*Math.pow(2,32)).toString(16)).slice(-8)},t.applyOptions=function(e,r,t,n){var o,s,c,p,y,g,v,w,b,E,A,k;if(t||(t={}),n||(n={}),g=n.language,w=t.range,b=t.match,E=t.exists,w||b||E)for(v=r,r=[],A=0,k=v.length;A<k;A++)s=v[A],w&&!u(e,w,s)||b&&!i(e,b,s)||E&&!a(e,E,s)||r.push(s);if(o=r.length,"fields"in t){if(p=!d(Object.keys(t.fields),function(e){return!t.fields[e]}),y=!d(Object.keys(t.fields),function(e){return t.fields[e]}),!p&&!y)throw new h(l("FieldsFormat",g));for(A=0,k=r.length;A<k;A++){s=r[A];for(c in s)c!==m&&(p&&!(c in t.fields)||y&&c in t.fields)&&delete s[c]}}return"sort"in t&&(r=r.sort(f(e,t.sort))),("limit"in t||"offset"in t)&&(r=r.slice(t.offset,t.limit?(t.offset||0)+t.limit:r.length)),r.count=o,r}}).call(this,e("buffer").Buffer)},{"../../common/array/find":11,"../../common/deep_equal":21,"../../common/errors":22,"../../common/keys":24,"../../common/message":25,buffer:48}],2:[function(e,r,t){"use strict";var n=e("../../../common/cast_to_number"),o=e("../common"),i=o.generateId,a="__";t.delimiter=a,t.inputRecord=function(e,r){var t,n,o,u,s=this.recordTypes,f=this.keys.primary,c=this.keys.isArray,l=s[e],d=Object.getOwnPropertyNames(l),p={};p[f]=e+a+(f in r?r[f]:i());for(t=0,n=d.length;t<n;t++)o=d[t],u=l[o][c],o in r?p[o]=r[o]:p[o]=u?[]:null;return p},t.outputRecord=function(e,r){var t,o,i,u,s,f,c=this.recordTypes,l=this.keys.primary,d=this.keys.isArray,p=this.keys.denormalizedInverse,h=c[e],y=Object.getOwnPropertyNames(h),m={};for(m[l]=n(r[l].split(a)[1]),t=0,o=y.length;t<o;t++)i=y[t],u=h[i][d],f=i in r?r[i]:u?[]:null,s=h[i][p],s?Object.defineProperty(m,i,{configurable:!0,writable:!0,value:f}):i in r&&(m[i]=f);return m}},{"../../../common/cast_to_number":18,"../common":1}],3:[function(e,r,t){"use strict";var n=e("msgpack-lite"),o=e("../../../common/array/reduce"),i=e("../../../common/assign"),a=e("../memory"),u=e("../common"),s=u.generateId,f=e("../../../common/constants"),c=f.primary,l=e("./worker"),d=e("./helpers"),p=d.inputRecord,h=d.outputRecord,y=d.delimiter;r.exports=function(e){function r(e){t.call(this,e),this.options.name||(this.options.name="fortune")}var t=a(e);return r.prototype=Object.create(t.prototype),r.prototype.connect=function(){function e(e,t){return o(t,function(t,o){return o=h.call(r,e,n.decode(o)),t[o[c]]=o,t},{})}var r=this,a=r.Promise,u=Object.keys(r.recordTypes),f=r.options.name,d=s();return t.prototype.connect.call(r).then(function(){return new a(function(e,r){var t,n,o,i="indexedDB"in window,a="Worker"in window,u="Blob"in window,s="URL"in window&&"createObjectURL"in URL;if(!(i&&a&&u&&s))return r(new Error("IndexedDB pre-requisites not met."));try{indexedDB.open("").onsuccess=function(e){e.target.result.close()}}catch(e){return r(new Error("IndexedDB capabilities detected, but a connection could not be opened due to browser security."))}return t=new Blob(["self.postMessage(Boolean(self.indexedDB))"],{type:"text/javascript"}),n=URL.createObjectURL(t),o=new Worker(n),o.onmessage=function(t){return t.data?e():r(new Error("No IndexedDB support in Web Worker."))},null}).then(function(){return new a(function(t,n){function o(i){var a,u=i.data,s=u.result;if(u.id!==d)return null;if(u.error)return n(new Error(u.error));r.worker.removeEventListener("message",o);for(a in s)r.db[a]=e(a,s[a]);return t()}var i,a,s;i=['var primaryKey = "'+c+'"','var delimiter = "'+y+'"','var dataKey = "__data"',"("+l.toString()+")()"].join(";"),a=new Blob([i],{type:"text/javascript"}),s=URL.createObjectURL(a),r.worker=new Worker(s),r.worker.addEventListener("message",o),r.worker.postMessage({id:d,method:"connect",name:f,typesArray:u})})}).catch(function(e){console.warn(e.message),i(r,t.prototype)})})},r.prototype.disconnect=function(){return this.worker.postMessage({method:"disconnect"}),t.prototype.disconnect.call(this)},r.prototype.create=function(e,r){var i=this,a=i.Promise;return t.prototype.create.call(i,e,r).then(function(r){return r.length?new a(function(t,a){function u(e){var n=e.data;return n.id!==f?null:n.error?a(new Error(n.error)):(i.worker.removeEventListener("message",u),t(r))}var f=s(),l=[];i.worker.addEventListener("message",u),i.worker.postMessage({id:f,method:"create",type:e,records:o(r,function(r,t){var o=n.encode(p.call(i,e,t));return l.push(o.buffer),r[t[c]]=o,r},{})},l)}):r})},r.prototype.find=function(e,r,n){return t.prototype.find.call(this,e,r,n)},r.prototype.update=function(e,r){var i=this,a=i.Promise,u=i.db,f=s();return t.prototype.update.call(i,e,r).then(function(t){return t?new a(function(a,s){function l(e){var r=e.data;return r.id!==f?null:r.error?s(new Error(r.error)):(i.worker.removeEventListener("message",l),a(t))}var d,h,y,m=[],g=[];for(d=0,h=r.length;d<h;d++)y=u[e][r[d][c]],y&&m.push(y);i.worker.addEventListener("message",l),i.worker.postMessage({id:f,method:"update",type:e,records:o(m,function(r,t){var o=n.encode(p.call(i,e,t));return g.push(o.buffer),r[t[c]]=o,r},{})},g)}):t})},r.prototype.delete=function(e,r){var n=this,o=n.Promise,i=s();return t.prototype.delete.call(n,e,r).then(function(t){return t?new o(function(o,a){function u(e){var r=e.data;return r.id!==i?null:r.error?a(new Error(r.error)):(n.worker.removeEventListener("message",u),o(t))}n.worker.addEventListener("message",u),n.worker.postMessage({id:i,method:r?"delete":"deleteAll",type:e,ids:r})}):t})},r}},{"../../../common/array/reduce":15,"../../../common/assign":17,"../../../common/constants":20,"../common":1,"../memory":6,"./helpers":2,"./worker":4,"msgpack-lite":55}],4:[function(e,r,t){"use strict";function n(){function e(e,r){function t(e){var r,t;for(a=e.target.result,r=0,t=d.length;r<t;r++)if(!~Array.prototype.indexOf.call(a.objectStoreNames,d[r]))return void o();i()}function n(e){var r,t,n;for(a=e.target.result,r=0,t=d.length;r<t;r++)n=d[r],~Array.prototype.indexOf.call(a.objectStoreNames,n)||a.createObjectStore(n,{keyPath:primaryKey});for(r=0,t=a.objectStoreNames.length;r<t;r++)n=a.objectStoreNames[r],~Array.prototype.indexOf.call(d,n)||a.deleteObjectStore(n)}function o(){var r=(a.version||1)+1;a.close(),l=u.open(e.name,r),l.onerror=f,l.onupgradeneeded=n,l.onsuccess=function(e){a=e.target.result,i(a)}}function i(){function e(e){var t=a.transaction(e,"readonly"),n=t.objectStore(e),s=n.openCursor();i[e]=[],s.onsuccess=function(t){var n=t.target.result;return n?(i[e].push(n.value[dataKey]),u.push(n.value[dataKey].buffer),void n.continue()):(o++,void(o===d.length&&r(null,i,u)))},s.onerror=c}var t,n,o=0,i={},u=[];for(t=0,n=d.length;t<n;t++)e(d[t])}function s(){r("The database connection could not be established.")}function f(){r("An attempt to reconnect failed.")}function c(){r("Failed to read record.")}var l=u.open(e.name),d=e.typesArray;l.onerror=s,l.onupgradeneeded=n,l.onsuccess=t}function r(){a.close()}function t(e,r){function t(){p++,p===f&&r()}function n(){r("A record could not be created.")}var o,i,u,s,f=Object.keys(e.records).length,c=e.type,l=a.transaction(c,"readwrite"),d=l.objectStore(c),p=0;for(o in e.records)i=e.records[o],u={},u[primaryKey]=c+delimiter+o,u[dataKey]=i,s=d.add(u),s.onsuccess=t,s.onerror=n}function n(e,r){function t(){p++,p===f&&r()}function n(){r("A record could not be updated.")}var o,i,u,s,f=Object.keys(e.records).length,c=e.type,l=a.transaction(c,"readwrite"),d=l.objectStore(c),p=0;for(o in e.records)i=e.records[o],u={},u[primaryKey]=c+delimiter+o,u[dataKey]=i,s=d.put(u),s.onsuccess=t,s.onerror=n}function o(e,r){function t(){p++,p===c.length&&r()}function n(){r("A record could not be deleted.")}var o,i,u,s,f=e.type,c=e.ids,l=a.transaction(f,"readwrite"),d=l.objectStore(f),p=0;for(o=0,i=c.length;o<i;o++)u=c[o],s=d.delete(f+delimiter+u),s.onsuccess=t,s.onerror=n}function i(e,r){function t(){r("Not all records could be deleted.")}var n=e.type,o=a.transaction(n,"readwrite"),i=o.objectStore(n),u=i.clear();u.onsuccess=function(){r()},u.onerror=t}var a,u=self.indexedDB,s={connect:e,disconnect:r,create:t,update:n,delete:o,deleteAll:i};self.addEventListener("message",function(e){var r=e.data,t=r.id,n=r.method;s[n](r,function(e,r,n){return e?void self.postMessage({id:t,error:e.toString()}):void self.postMessage({id:t,result:r},n)})})}r.exports=n},{}],5:[function(e,r,t){"use strict";var n=e("../common"),o=n.generateId;t.inputRecord=function(e,r){var t,n,i,a=this.recordTypes,u=this.keys.primary,s=this.keys.isArray,f=a[e],c=Object.getOwnPropertyNames(f),l={};l[u]=u in r?r[u]:o();for(t=0,n=c.length;t<n;t++)i=c[t],i in r?l[i]=r[i]:l[i]=f[i][s]?[]:null;return l},t.outputRecord=function(e,r){var t,n,o,i,a=this.recordTypes,u=this.keys.primary,s=this.keys.isArray,f=this.keys.denormalizedInverse,c=a[e],l=Object.getOwnPropertyNames(c),d={};for(d[u]=r[u],t=0,n=l.length;t<n;t++)o=l[t],i=o in r?r[o]:c[o][s]?[]:null,c[o][f]?Object.defineProperty(d,o,{configurable:!0,writable:!0,value:i}):o in r&&(d[o]=i);return d}},{"../common":1}],6:[function(e,r,t){"use strict";var n=e("../../../common/apply_update"),o=e("../../../common/array/map"),i=e("../common"),a=i.applyOptions,u=e("./helpers"),s=u.inputRecord,f=u.outputRecord;r.exports=function(e){function r(r){e.call(this,r),this.options||(this.options={}),"recordsPerType"in this.options||(this.options.recordsPerType=1e3)}return r.prototype=Object.create(e.prototype),r.prototype.connect=function(){var e,r=this.Promise,t=this.recordTypes;this.db={};for(e in t)this.db[e]={};return r.resolve()},r.prototype.disconnect=function(){var e=this.Promise;return delete this.db,e.resolve()},r.prototype.find=function(r,t,n,o){var i,u,s,c,l=this,d=l.Promise,p=l.db,h=l.recordTypes,y=h[r],m=p[r],g=[];if(t&&!t.length)return e.prototype.find.call(l);if(t)for(i=0,u=t.length;i<u;i++)s=t[i],s in m&&(c=m[s],delete m[s],m[s]=c,g.push(f.call(l,r,c)));else for(s in m)g.push(f.call(l,r,m[s]));return d.resolve(a(y,g,n,o))},r.prototype.create=function(e,r,t){var n,i,a,u,c,l,d=this,p=d.message,h=d.Promise,y=d.db,m=d.options.recordsPerType,g=d.keys.primary,v=d.errors.ConflictError,w=y[e];for(t||(t={}),l=t.language,r=o(r,function(r){return s.call(d,e,r)}),n=0,i=r.length;n<i;n++)if(a=r[n],u=a[g],w[u])return h.reject(new v(p("RecordExists",l,{id:u})));for(n=0,i=r.length;n<i;n++)a=r[n],w[a[g]]=a;if(m&&(c=Object.keys(w),c.length>m))for(c=c.slice(0,c.length-m),n=0,i=c.length;n<i;n++)delete w[c[n]];return h.resolve(o(r,function(r){return f.call(d,e,r)}))},r.prototype.update=function(r,t){var o,i,a,u,c,l=this,d=l.Promise,p=l.db,h=l.keys.primary,y=p[r],m=0;if(!t.length)return e.prototype.update.call(l);for(o=0,i=t.length;o<i;o++)a=t[o],u=a[h],c=y[u],c&&(m++,c=f.call(l,r,c),n(c,a),delete y[u],y[u]=s.call(l,r,c));return d.resolve(m)},r.prototype.delete=function(r,t){var n,o,i,a=this.Promise,u=this.db,s=u[r],f=0;if(t&&!t.length)return e.prototype.delete.call(this);if(t)for(n=0,o=t.length;n<o;n++)i=t[n],s[i]&&(delete s[i],f++);else for(i in s)delete s[i],f++;return a.resolve(f)},r}},{"../../../common/apply_update":10,"../../../common/array/map":13,"../common":1,"./helpers":5}],7:[function(e,r,t){"use strict";function n(e){o(this,e)}var o=e("../common/assign");n.prototype.constructor=function(){},delete n.prototype.constructor,n.prototype.connect=function(){return Promise.resolve()},n.prototype.disconnect=function(){return Promise.resolve()},n.prototype.create=function(){return Promise.resolve([])},n.prototype.find=function(){var e=[];return e.count=0,Promise.resolve(e)},n.prototype.update=function(){return Promise.resolve(0)},n.prototype.delete=function(){return Promise.resolve(0)},n.prototype.beginTransaction=function(){return Promise.resolve(this)},n.prototype.endTransaction=function(){return Promise.resolve()},n.prototype.applyOperators=function(e){return e},r.exports=n},{"../common/assign":17}],8:[function(e,r,t){"use strict";function n(e){var r,t;if(t=Array.isArray(e.adapter)?e.adapter:[e.adapter],"function"!=typeof t[0])throw new TypeError("The adapter must be a function.");if(r=o.prototype.isPrototypeOf(t[0].prototype)?t[0]:t[0](o),!o.prototype.isPrototypeOf(r.prototype))throw new TypeError("The adapter must inherit the Adapter class.");return new r({options:t[1]||{},recordTypes:e.recordTypes,errors:i,keys:a,message:u,Promise:s.Promise})}var o=e("./"),i=e("../common/errors"),a=e("../common/keys"),u=e("../common/message"),s=e("../common/promise");r.exports=n},{"../common/errors":22,"../common/keys":24,"../common/message":25,"../common/promise":27,"./":7}],9:[function(e,r,t){"use strict";function n(e,r){return this instanceof n?(void 0===r&&(r={}),"adapter"in r||(r.adapter=[s]),"settings"in r||(r.settings={}),"enforceLinks"in r.settings||(r.settings.enforceLinks=!1),this.constructor(e,r)):new n(e,r)}var o=e("./core"),i=e("./common/promise"),a=e("./common/assign"),u=e("./adapter/adapters/memory"),s=e("./adapter/adapters/indexeddb"),f=e("./net/websocket_request"),c=e("./net/websocket_client"),l=e("./net/websocket_sync"),d={memory:u,indexedDB:s},p={request:f,client:c,sync:l};n.prototype=Object.create(o.prototype),a(n,o),i.assignPromise(n,"Promise"),a(n,{adapters:d,net:p}),r.exports=n},{"./adapter/adapters/indexeddb":3,"./adapter/adapters/memory":6,"./common/assign":17,"./common/promise":27,"./core":29,"./net/websocket_client":41,"./net/websocket_request":42,"./net/websocket_sync":43}],10:[function(e,r,t){"use strict";var n=e("./array/pull");r.exports=function(e,r){var t;for(t in r.replace)e[t]=r.replace[t];for(t in r.push)e[t]=e[t]?e[t].concat(r.push[t]):[].concat(r.push[t]);for(t in r.pull)e[t]=e[t]?n(e[t],r.pull[t]):[]}},{"./array/pull":14}],11:[function(e,r,t){"use strict";r.exports=function(e,r){var t,n,o,i;for(t=0,n=e.length;t<n;t++)if(o=e[t],i=r(o))return o}},{}],12:[function(e,r,t){"use strict";r.exports=function(e,r){var t,n;for(t=0,n=e.length;t<n;t++)if(e[t]===r)return!0;return!1}},{}],13:[function(e,r,t){"use strict";r.exports=function(e,r){var t,n,o=[],i=0;for(t=0,n=e.length;t<n;t++)o[i++]=r(e[t],t,e);return o}},{}],14:[function(e,r,t){"use strict";r.exports=function(e,r){var t,n,o,i={},a=[];if(Array.isArray(r))for(n=0,o=r.length;n<o;n++)i[r[n]]=!0;else i[r]=!0;for(n=e.length;n--;)t=e[n],t in i||a.push(t);return a}},{}],15:[function(e,r,t){"use strict";r.exports=function(e,r,t){var n,o,i=t;for(n=0,o=e.length;n<o;n++)i=r(i,e[n],n,e);return i}},{}],16:[function(e,r,t){"use strict";r.exports=function(e){var r,t,n,o={},i=[];for(r=0,t=e.length;r<t;r++)n=e[r],n in o||(i.push(n),o[n]=!0);return i}},{}],17:[function(e,r,t){"use strict";r.exports=function(e){var r,t,n,o;for(r=1,t=arguments.length;r<t;r++)if(o=arguments[r],null!=o)for(n in o)e[n]=o[n];return e}},{}],18:[function(e,r,t){"use strict";r.exports=function(e){var r=Number.parseFloat(e);return e-r+1>=0?r:e}},{}],19:[function(e,r,t){"use strict";r.exports=function e(r){var t,n,o,i;if(Array.isArray(r))i=!0;else if(null==r||Object.getPrototypeOf(r)!==Object.prototype)return r;t=i?[]:{};for(n in r)o=r[n],t[n]=null!=o&&Object.getPrototypeOf(o)===Object.prototype||Array.isArray(o)?e(o):o;return t}},{}],20:[function(e,r,t){"use strict";t.primary="id",t.type="type",t.link="link",t.inverse="inverse",t.isArray="isArray",t.denormalizedInverse="__denormalizedInverse__",t.change="change",t.sync="sync",t.connect="connect",t.disconnect="disconnect",t.failure="failure",t.find="find",t.create="create",t.update="update",t.delete="delete"},{}],21:[function(e,r,t){(function(e){"use strict";function t(r,n){var o,i,a,u=0,s=0;if(r===n)return!0;if(!r||!n)return!1;if(r.prototype!==n.prototype)return!1;for(o in r)if(u++,i=r[o],a=n[o],"object"!=typeof i){if(e.isBuffer(i)){if(!e.isBuffer(a)||!i.equals(a))return!1}else if(i&&"function"==typeof i.getTime){if(!a||"function"!=typeof a.getTime||i.getTime()!==a.getTime())return!1}else if(i!==a)return!1}else if("object"!=typeof a||!t(i,a))return!1;for(o in n)s++;return u===s}r.exports=t}).call(this,{isBuffer:e("../../node_modules/is-buffer/index.js")})},{"../../node_modules/is-buffer/index.js":54}],22:[function(e,r,t){"use strict";var n=e("./response_classes");t.BadRequestError=n.BadRequestError,t.UnauthorizedError=n.UnauthorizedError,t.ForbiddenError=n.ForbiddenError,t.NotFoundError=n.NotFoundError,t.MethodError=n.MethodError,t.NotAcceptableError=n.NotAcceptableError,t.ConflictError=n.ConflictError,t.UnsupportedError=n.UnsupportedError,t.nativeErrors=n.nativeErrors},{"./response_classes":28}],23:[function(e,r,t){"use strict";var n=e("./constants");t.change=n.change,t.sync=n.sync,t.connect=n.connect,t.disconnect=n.disconnect,t.failure=n.failure},{"./constants":20}],24:[function(e,r,t){"use strict";var n=e("./constants");t.primary=n.primary,t.type=n.type,t.link=n.link,t.isArray=n.isArray,t.inverse=n.inverse,t.denormalizedInverse=n.denormalizedInverse},{"./constants":20}],25:[function(e,r,t){"use strict";function n(e,r,t){var i,a;if(r&&r in n||(r=n.defaultLanguage),!(e in n[r]))return n[r][o]||n.en[o];i=n[r][e];for(a in t)i=i.replace("{"+a+"}",t[a]);return i}var o="GenericError";r.exports=n,Object.defineProperty(n,"defaultLanguage",{value:"en",writable:!0}),n.en={GenericError:"An internal error occurred.",MalformedRequest:"The request was malformed.",InvalidBody:"The request body is invalid.",SerializerNotFound:'The serializer for "{id}" does not exist.',InputOnly:"Input only.",InvalidID:"An ID is invalid.",DateISO8601:"Date string must be an ISO 8601 formatted string.",DateInvalid:"Date value is invalid.",BufferEncoding:"Buffer value must be a {bufferEncoding}-encoded string.",JSONParse:"Could not parse value as JSON.",MissingPayload:"Payload is missing.",SpecifiedIDs:"IDs should not be specified.",InvalidURL:"Invalid URL.",RelatedRecordNotFound:'A related record for the field "{field}" was not found.',CreateRecordsInvalid:"There are no valid records to be created.",CreateRecordsFail:"Records could not be created.",CreateRecordMissingID:"An ID on a created record is missing.",DeleteRecordsMissingID:"IDs are required for deleting records.",DeleteRecordsInvalid:"A record to be deleted could not be found.",DeleteRecordsFail:"Not all records specified could be deleted.",UnspecifiedType:"The type is unspecified.",InvalidType:'The requested type "{type}" is not a valid type.',InvalidMethod:'The method "{method}" is unrecognized.',CollisionToOne:'Multiple records can not have the same to-one link value on the field "{field}".',CollisionDuplicate:'Duplicate ID "{id}" in the field "{field}".',UpdateRecordMissing:"A record to be updated could not be found.",UpdateRecordsInvalid:"There are no valid updates.",UpdateRecordMissingID:"An ID on an update is missing.",EnforceArrayType:'The value of "{key}" is invalid, it must be an array with values of type "{type}".',EnforceArray:'The value of "{key}" is invalid, it must be an array.',EnforceSameID:'An ID of "{key}" is invalid, it cannot be the same ID of the record.',EnforceSingular:'The value of "{key}" can not be an array, it must be a singular value.',EnforceValue:'The value of "{key}" is invalid, it must be a "{type}".',EnforceValueArray:'A value in the array of "{key}" is invalid, it must be a "{type}".',FieldsFormat:"Fields format is invalid. It may either be inclusive or exclusive, but not both.",RecordExists:'A record with ID "{id}" already exists.',Index:"Index",Class:"Class",Properties:"Properties",Include:"Include",QueryOptions:"Query Options",IncludedLabel:"included",NoResults:"No results.",Create:"Create",Update:"Update",Delete:"Delete",True:"True",False:"False",IncludePath:"Path (dot-separated)",Query:"Query",Fields:"Fields",Match:"Match",Sort:"Sort",Field:"Field",Pagination:"Pagination",Limit:"Limit",Offset:"Offset"}},{}],26:[function(e,r,t){"use strict";var n=e("./constants");t.find=n.find,t.create=n.create,t.update=n.update,t.delete=n.delete},{"./constants":20}],27:[function(e,r,t){"use strict";t.Promise=Promise,t.assignPromise=function(e,r){Object.defineProperty(e,r,{enumerable:!0,get:function(){return t.Promise},set:function(e){t.Promise=e}})}},{}],28:[function(e,r,t){"use strict";function n(e){return Function("assign","return function "+e+" (x) { assign(this, x) }")(i)}var o=e("error-class"),i=e("./assign");t.OK=n("OK"),t.Created=n("Created"),t.Empty=n("Empty"),t.BadRequestError=o("BadRequestError"),t.UnauthorizedError=o("UnauthorizedError"),t.ForbiddenError=o("ForbiddenError"),t.NotFoundError=o("NotFoundError"),t.MethodError=o("MethodError"),t.NotAcceptableError=o("NotAcceptableError"),t.ConflictError=o("ConflictError"),t.UnsupportedError=o("UnsupportedError"),t.nativeErrors=[Error,TypeError,ReferenceError,RangeError,SyntaxError,EvalError,URIError]},{"./assign":17,"error-class":50}],29:[function(e,r,t){"use strict";function n(e){this.constructor(e)}function o(e,r){return function(t){return r.call(e,t)}}var i=e("event-lite"),a=e("./adapter/adapters/memory"),u=e("./adapter/singleton"),s=e("./common/assign"),f=e("./record_type/validate"),c=e("./record_type/ensure_types"),l=e("./dispatch"),d=e("./common/promise"),p=l.middlewares,h=e("./adapter"),y=e("./common/errors"),m=e("./common/methods"),g=e("./common/events"),v=e("./common/message");n.prototype=Object.create(i.prototype),n.prototype.constructor=function(e,r){var t,n,i,s,c,l,d,h,y=this;if("object"!=typeof e)throw new TypeError("First argument must be an object.");if(!Object.keys(e).length)throw new Error("At least one type must be specified.");"transforms"in r&&(r.hooks=r.transforms),"adapter"in r||(r.adapter=[a]),"settings"in r||(r.settings={}),"hooks"in r||(r.hooks={}),"enforceLinks"in r.settings||(r.settings.enforceLinks=!0),s={};for(n in m){for(i=[p[n],p.include,p.end],d=0,h=i.length;d<h;d++)i[d]=o(y,i[d]);s[m[n]]=i}l=r.hooks;for(c in l){if(!(c in e))throw new Error('Attempted to define hook on "'+c+'" type which does not exist.');if(!Array.isArray(l[c]))throw new TypeError('Hook value for "'+c+'" type must be an array.')}for(c in e)f(e[c]),c in l||(l[c]=[]);t=new u({adapter:r.adapter,recordTypes:e,hooks:l}),Object.defineProperties(y,{connectionStatus:{value:0,writable:!0},options:{value:r},hooks:{value:l},recordTypes:{value:e,enumerable:!0},adapter:{value:t,enumerable:!0,configurable:!0},flows:{value:s}})},n.prototype.request=function(e){var r=this,t=d.Promise,n=r.connectionStatus;return 0===n?r.connect().then(function(){return l(r,e)}):1===n?new t(function(t,n){r.once(g.failure,function(){n(new Error("Connection failed."))}),r.once(g.connect,function(){t(l(r,e))})}):l(r,e)},n.prototype.find=function(){var e={method:m.find,type:arguments[0]};return null!=arguments[1]&&(e.ids=Array.isArray(arguments[1])?arguments[1]:[arguments[1]]),null!=arguments[2]&&(e.options=arguments[2]),null!=arguments[3]&&(e.include=arguments[3]),null!=arguments[4]&&(e.meta=arguments[4]),this.request(e)},n.prototype.create=function(){var e={method:m.create,type:arguments[0],payload:Array.isArray(arguments[1])?arguments[1]:[arguments[1]]};return null!=arguments[2]&&(e.include=arguments[2]),null!=arguments[3]&&(e.meta=arguments[3]),this.request(e)},n.prototype.update=function(){var e={method:m.update,type:arguments[0],payload:Array.isArray(arguments[1])?arguments[1]:[arguments[1]]};return null!=arguments[2]&&(e.include=arguments[2]),null!=arguments[3]&&(e.meta=arguments[3]),this.request(e)},n.prototype.delete=function(){var e={method:m.delete,type:arguments[0]};return null!=arguments[1]&&(e.ids=Array.isArray(arguments[1])?arguments[1]:[arguments[1]]),null!=arguments[2]&&(e.include=arguments[2]),null!=arguments[3]&&(e.meta=arguments[3]),this.request(e)},n.prototype.connect=function(){var e=this,r=d.Promise;return 1===e.connectionStatus?r.reject(new Error("Connection is in progress.")):2===e.connectionStatus?r.reject(new Error("Connection is already done.")):(e.connectionStatus=1,new r(function(r,t){c(e.recordTypes),e.adapter.connect().then(function(){return e.connectionStatus=2,e.emit(g.connect),r(e)},function(r){return e.connectionStatus=0,e.emit(g.failure),t(r)})}))},n.prototype.disconnect=function(){var e=this,r=d.Promise;return 2!==e.connectionStatus?r.reject(new Error("Instance has not been connected.")):(e.connectionStatus=1,new r(function(r,t){return e.adapter.disconnect().then(function(){return e.connectionStatus=0,e.emit(g.disconnect),r(e)},function(r){return e.connectionStatus=2,e.emit(g.failure),t(r)})}))},s(n,{Adapter:h,errors:y,methods:m,message:v,events:g}),r.exports=n},{"./adapter":7,"./adapter/adapters/memory":6,"./adapter/singleton":8,"./common/assign":17,"./common/errors":22,"./common/events":23,"./common/message":25,"./common/methods":26,"./common/promise":27,"./dispatch":36,"./record_type/ensure_types":45,"./record_type/validate":46,"event-lite":51}],30:[function(e,r,t){"use strict";var n=e("../common/message"),o=e("../common/promise"),i=e("../common/array/unique"),a=e("../common/array/map"),u=e("../common/array/includes"),s=e("../common/errors"),f=s.BadRequestError,c=e("../common/keys"),l=c.primary,d=c.link,p=c.isArray,h=c.inverse;r.exports=function(e,r,t,s){var c=o.Promise,y=this.adapter,m=this.options.settings.enforceLinks;return c.all(a(t,function(t){var o=Array.isArray(e[t])?e[t]:t in e&&null!==e[t]?[e[t]]:[],p=r[t][d],g=r[t][h],v={fields:{}};return v.fields[g]=!0,new c(function(e,r){return o.length?y.find(p,o,v,s).then(function(c){var d,p,h;if(m)for(d=i(a(c,function(e){return e[l]})),p=0,h=o.length;p<h;p++)if(!u(d,o[p]))return r(new f(n("RelatedRecordNotFound",s.language,{field:t})));return e(c)}):e()})})).then(function(e){var n,o,i,a={};for(o=0,i=e.length;o<i;o++)n=e[o],n&&(a[t[o]]=r[t[o]][p]?n:n[0]);return a})}},{"../common/array/includes":12,"../common/array/map":13,"../common/array/unique":16,"../common/errors":22,"../common/keys":24,"../common/message":25,"../common/promise":27}],31:[function(e,r,t){"use strict";var n=e("./validate_records"),o=e("./check_links"),i=e("../record_type/enforce"),a=e("../common/message"),u=e("../common/promise"),s=e("../common/array/map"),f=e("../common/errors"),c=f.BadRequestError,l=e("./update_helpers"),d=l.getUpdate,p=l.addId,h=e("../common/constants"),y=h.change,m=h.create,g=h.update,v=h.primary,w=h.link,b=h.inverse,E=h.isArray,A=h.denormalizedInverse;r.exports=function(e){var r,t,f,l,h,k,x,P=this,U=u.Promise,T=P.adapter,B=P.recordTypes,R=P.hooks,_={},I=[];return U.resolve(e.request.payload).then(function(r){var n,o,i;if(t=r,!t||!t.length)throw new c(a("CreateRecordsInvalid",x));f=e.request.type,l=e.request.meta,x=l.language,h=R[f],k=B[f];for(i in k)if(w in k[i]&&I.push(i),A in k[i])for(n=0,o=t.length;n<o;n++)delete t[n][i];return T.beginTransaction()}).then(function(n){return e.transaction=r=n,"function"==typeof h[0]?U.all(s(t,function(r){return h[0](e,r)})):t}).then(function(e){return U.all(s(e,function(e,r){return e?t[r]=e:e=t[r],i(f,e,k,l),o.call(P,e,k,I,l)}))}).then(function(){return n.call(P,t,k,I,l),r.create(f,t,l)}).then(function(n){var o,i,u,f,h,y,m,g,A,P,T,R,S,O={};if(!n.length)throw new c(a("CreateRecordsFail",x));for(t=n,Object.defineProperty(e.response,"records",{configurable:!0,value:t}),o=0,i=t.length;o<i;o++){if(m=t[o],!(v in m))throw new Error(a("CreateRecordMissingID",x));for(u=0,f=I.length;u<f;u++)if(g=I[u],A=k[g][b],g in m&&A)for(P=k[g][w],T=B[P][A][E],R=Array.isArray(m[g])?m[g]:[m[g]],_[P]||(_[P]=[]),O[P]||(O[P]={}),h=0,y=R.length;h<y;h++)S=R[h],null!==S&&p(m[v],d(P,S,_,O),A,T)}return U.all(s(Object.keys(_),function(e){return _[e].length?r.update(e,_[e],l):null}))}).then(function(){return r.endTransaction()}).catch(function(e){throw r&&r.endTransaction(e),e}).then(function(){var r,n={};n[m]={},n[m][f]=t;for(r in _)_[r].length&&(g in n||(n[g]={}),n[g][r]=_[r]);return P.emit(y,n),e})}},{"../common/array/map":13,"../common/constants":20,"../common/errors":22,"../common/message":25,"../common/promise":27,"../record_type/enforce":44,"./check_links":30,"./update_helpers":38,"./validate_records":39}],32:[function(e,r,t){"use strict";var n=e("../common/message"),o=e("../common/promise"),i=e("../common/array/map"),a=e("../common/errors"),u=a.NotFoundError,s=e("./update_helpers"),f=s.getUpdate,c=s.removeId,l=e("../common/constants"),d=l.change,p=l.delete,h=l.update,y=l.primary,m=l.link,g=l.inverse,v=l.isArray;r.exports=function(e){var r,t,a,s=this,l=o.Promise,w=e.request,b=w.type,E=w.ids,A=w.meta,k=A.language,x=s.adapter,P=s.recordTypes,U=s.hooks,T={},B=P[b],R=U[b],_=[];for(t in B)m in B[t]&&_.push(t);if(!E||!E.length)throw new u(n("DeleteRecordsMissingID",k));return x.find(b,E,null,A).then(function(r){if(a=r,a.length<E.length)throw new u(n("DeleteRecordsInvalid",k));return Object.defineProperty(e.response,"records",{configurable:!0,value:a}),x.beginTransaction()}).then(function(t){return e.transaction=r=t,"function"==typeof R[0]?l.all(i(a,function(r){return R[0](e,r)})):a}).then(function(){return r.delete(b,E,A)}).then(function(e){var t,o,u,s,d,p,h,w,b,x,U,R,I,S={};if(e<E.length)throw new Error(n("DeleteRecordsFail",k));for(t=0,o=a.length;t<o;t++)for(h=a[t],u=0,s=_.length;u<s;u++)if(w=_[u],x=B[w][g],w in h&&x)for(U=B[w][m],R=P[U][x][v],I=Array.isArray(h[w])?h[w]:[h[w]],T[U]||(T[U]=[]),S[U]||(S[U]={}),d=0,p=I.length;d<p;d++)b=I[d],null!==b&&c(h[y],f(U,b,T,S),x,R);return l.all(i(Object.keys(T),function(e){return T[e].length?r.update(e,T[e],A):null}))}).then(function(){return r.endTransaction()}).catch(function(e){throw r&&r.endTransaction(e),e}).then(function(){var r,t={};t[p]={},t[p][b]=E;for(r in T)T[r].length&&(h in t||(t[h]={}),t[h][r]=T[r]);return s.emit(d,t),e})}},{"../common/array/map":13,"../common/constants":20,"../common/errors":22,"../common/message":25,"../common/promise":27,"./update_helpers":38}],33:[function(e,r,t){"use strict";var n=e("../common/array/map"),o=e("../common/promise");r.exports=function(e){var r=o.Promise,t=this.hooks,i=e.request,a=e.response,u=i.type,s=t[u],f=a.records,c=a.include;return delete a.records,delete a.include,delete e.transaction,(f?r.all(n(f,function(t){return r.resolve("function"==typeof s[1]?s[1](e,t):t);
})).then(function(o){var i,a,u;for(a=0,u=o.length;a<u;a++)o[a]&&(f[a]=o[a]);if(c)return i=Object.keys(c),r.all(n(i,function(o){return r.all(n(c[o],function(n){return r.resolve("function"==typeof t[o][1]?t[o][1](e,n):n)}))})).then(function(e){var r,t,n,o;for(r=0,t=e.length;r<t;r++)for(n=0,o=e[r].length;n<o;n++)e[r][n]&&(c[i[r]][n]=e[r][n])})}):r.resolve()).then(function(){return e.response.payload={records:f},c&&(e.response.payload.include=c),f&&"count"in f&&(e.response.payload.count=f.count),e})}},{"../common/array/map":13,"../common/promise":27}],34:[function(e,r,t){"use strict";r.exports=function(e){var r=this.adapter,t=e.request,n=t.type,o=t.ids,i=t.options,a=t.meta;return n?r.find(n,o,i,a).then(function(r){return Object.defineProperty(e.response,"records",{configurable:!0,value:r}),e}):e}},{}],35:[function(e,r,t){"use strict";function n(e){return function(r){return r[l]===e}}var o=e("../common/promise"),i=e("../common/array/map"),a=e("../common/array/find"),u=e("../common/array/reduce"),s=e("../common/errors"),f=s.BadRequestError,c=e("../common/keys"),l=c.primary,d=c.link;r.exports=function e(r){var t,s,c,p,h=o.Promise,y=r.request,m=y.type,g=y.ids||[],e=y.include,v=y.meta,w=r.response,b=w.records,E=this.recordTypes,A=this.adapter,k={};for(k[m]={},t=0,s=g.length;t<s;t++)k[m][g[t]]=!0;if(!m||!e||!b)return r;if(g&&!g.length)for(t=0,s=b.length;t<s;t++)c=b[t],p=c[l],k[m][p]||(k[m][p]=!0);return h.all(i(e,function(e){return new h(function(r,t){var n,o,a,s,c=m,p=[];return"object"==typeof e[e.length-1]&&(s=e[e.length-1],e=e.slice(0,-1)),h.all(i(b,function(r){var t;return e[0]in r?r:(t={fields:{}},t.fields[e[0]]=!0,A.find(m,[r[l]],t,v).then(function(e){return e[0]}))})).then(function(r){return u(e,function(r,t,i){return r.then(function(r){if(a=E[c][t],!c||!a)return[];if(!(d in a))throw new f('The field "'+t+'" does not define a link.');return n={},c=a[d],p=u(r,function(e,r){var o,i,a,u=Array.isArray(r[t])?r[t]:[r[t]];for(o=0,i=u.length;o<i;o++)a=u[o],a&&!n[a]&&(n[a]=!0,e.push(a));return e},[]),i===e.length-1?o=s:(o={fields:{}},o.fields[e[i+1]]=!0),p.length?A.find(c,p,o,v):[]})},h.resolve(r))}).then(function(e){return r({type:c,ids:p,records:e})},function(e){return t(e)})})})).then(function(e){var t=u(e,function(e,r){var t,o,i,u;if(!r.ids.length)return e;for(e[r.type]||(e[r.type]=[]),k[r.type]||(k[r.type]={}),t=0,o=r.ids.length;t<o;t++)i=r.ids[t],k[r.type][i]||(u=a(r.records,n(i)),u&&(k[r.type][i]=!0,e[r.type].push(u)));return e[r.type].length||delete e[r.type],e},{});return Object.keys(t).length&&Object.defineProperty(r.response,"include",{configurable:!0,value:t}),r})}},{"../common/array/find":11,"../common/array/map":13,"../common/array/reduce":15,"../common/errors":22,"../common/keys":24,"../common/promise":27}],36:[function(e,r,t){"use strict";function n(e,r){var t=e.flows,n=e.recordTypes,f=i.Promise,m=o(r);return f.resolve(m).then(function(e){var r,o,i,a,p,h=e.request.method,y=e.request.type,m=e.request.ids,g=e.request.meta.language;if(g=e.request.meta.language,m&&(e.request.ids=u(m)),null===y)throw i=new c(s("UnspecifiedType",g)),i.isTypeUnspecified=!0,i;if(!(y in n))throw new l(s("InvalidType",g,{type:y}));if(!(h in t))throw new d(s("InvalidMethod",g,{method:h}));for(r=f.resolve(e),o=t[h],a=0,p=o.length;a<p;a++)r=r.then(o[a]);return r}).then(function(e){var r=e.request.method,t=e.response,n=t.payload;return n?r===v?new y(t):new p(t):new h(t)}).catch(function(e){throw a(e,m.response)})}function o(e){var r={request:{method:g,type:null,ids:null,options:{},include:[],meta:{},payload:null},response:{meta:{},payload:null}};return a(r.request,e),r}var i=e("../common/promise"),a=e("../common/assign"),u=e("../common/array/unique"),s=e("../common/message"),f=e("../common/response_classes"),c=f.BadRequestError,l=f.NotFoundError,d=f.MethodError,p=f.OK,h=f.Empty,y=f.Created,m=e("../common/methods"),g=m.find,v=m.create;n.middlewares={create:e("./create"),delete:e("./delete"),update:e("./update"),find:e("./find"),include:e("./include"),end:e("./end")},r.exports=n},{"../common/array/unique":16,"../common/assign":17,"../common/message":25,"../common/methods":26,"../common/promise":27,"../common/response_classes":28,"./create":31,"./delete":32,"./end":33,"./find":34,"./include":35,"./update":37}],37:[function(e,r,t){"use strict";function n(e,r){var t,n,o,i=r.language;if(!e||!e.length)throw new b(l("UpdateRecordsInvalid",i));for(t=0,n=e.length;t<n;t++)if(o=e[t],!o[T])throw new b(l("UpdateRecordMissingID",i))}function o(e,r){var t;for(t in e.replace)t in r||delete e.replace[t];for(t in e.pull)t in r||delete e.pull[t];for(t in e.push)t in r||delete e.push[t]}var i=e("../common/deep_equal"),a=e("../common/assign"),u=e("../common/clone"),s=e("./validate_records"),f=e("./check_links"),c=e("../record_type/enforce"),l=e("../common/message"),d=e("../common/promise"),p=e("../common/apply_update"),h=e("./update_helpers"),y=h.getUpdate,m=h.addId,g=h.removeId,v=e("../common/errors"),w=v.NotFoundError,b=v.BadRequestError,E=e("../common/array/find"),A=e("../common/array/includes"),k=e("../common/array/map"),x=e("../common/constants"),P=x.change,U=x.update,T=x.primary,B=x.link,R=x.inverse,_=x.isArray,I=x.denormalizedInverse;r.exports=function(e){var r,t,h,v,x,S,O,D=this,j=d.Promise,C=D.adapter,M=D.recordTypes,L=D.hooks,N=new WeakMap,q=new WeakMap,F={},Y=[],z=[];return j.resolve(e.request.payload).then(function(r){var o,i,a,u;t=r,n(t,e.request.meta),x=e.request.type,S=e.request.meta,O=S.language,h=M[x],v=L[x];for(u in h)if(B in h[u]&&z.push(u),I in h[u])for(o=0,i=t.length;o<i;o++)a=t[o],a.replace&&delete a.replace[u],a.pull&&delete a.pull[u],a.push&&delete a.push[u];return C.beginTransaction()}).then(function(n){return e.transaction=r=n,C.find(x,k(t,function(e){return e[T]}),null,S)}).then(function(r){if(r.length<t.length)throw new w(l("UpdateRecordMissing",O));return j.all(k(r,function(r){var n,o,s="function"==typeof v[0],d=r[T];if(n=E(t,function(e){return e[T]===d}),!n)throw new w(l("UpdateRecordMissing",O));return s&&(o=u(n)),j.resolve(s?v[0](e,r,n):n).then(function(t){if(t&&(n=t),s&&(i(n,o)||(e.response.meta.updateModified=!0),n[T]!==d))throw new b(l("InvalidID",O));return Y.push(n),N.set(n,r),r=a({},r),p(r,n),n.operate&&(r=C.applyOperators(r,n.operate)),c(x,r,h,S),f.call(D,r,h,z,S).then(function(e){return q.set(n,e),r})})}))}).then(function(t){var n,i;for(s.call(D,t,h,z,S),Object.defineProperty(e.response,"records",{configurable:!0,value:t}),n=0,i=Y.length;n<i;n++)o(Y[n],h);return r.update(x,Y,S)}).then(function(){var e,t,n,o,i,a,u,s,f,c,l,d,p,v,w,b,E,P,U,I,O={};for(w=0,b=Y.length;w<b;w++)for(p=Y[w],E=0,P=z.length;E<P;E++)if(v=z[E],e=h[v][R]){if(t=h[v][_],n=h[v][B],o=M[n][e][_],F[n]||(F[n]=[]),O[n]||(O[n]={}),a=N.get(p),i=q.get(p),p.replace&&v in p.replace){if(c=p.replace[v],!Array.isArray(c)){if(c===a[v])continue;null!==c&&m(p[T],y(n,c,F,O),e,o),v in i&&null!==i[v][e]&&!o&&i[v][e]!==p[T]&&g(c,y(n,i[v][e],F,O),e,o),null!==a[v]&&a[v]!==p[v]&&a[v]!==c&&g(p[T],y(n,a[v],F,O),e,o);continue}for(f=c,U=0,I=a[v].length;U<I;U++)if(c=a[v][U],!A(f,c)){if("pull"in p||(p.pull={}),v in p.pull){if(Array.isArray(p.pull[v])){p.pull[v].push(c);continue}p.pull[v]=[p.pull[v],c];continue}p.pull[v]=[c]}for(U=0,I=f.length;U<I;U++)if(c=f[U],!A(a[v],c)){if("push"in p||(p.push={}),v in p.push){if(Array.isArray(p.push[v])){p.push[v].push(c);continue}p.push[v]=[p.push[v],c];continue}p.push[v]=[c]}delete p.replace[v]}if(p.pull&&p.pull[v])for(d=Array.isArray(p.pull[v])?p.pull[v]:[p.pull[v]],U=0,I=d.length;U<I;U++)c=d[U],null!==c&&g(p[T],y(n,c,F,O),e,o);if(p.push&&p.push[v])for(l=Array.isArray(p.push[v])?p.push[v]:[p.push[v]],U=0,I=l.length;U<I;U++)c=l[U],null!==c&&m(p[T],y(n,c,F,O),e,o);if(v in i&&!o)for(s=Array.isArray(i[v])?i[v]:[i[v]],U=0,I=s.length;U<I;U++)u=s[U],u[e]!==p[T]&&g(u[T],y(x,u[e],F,O),v,t)}return j.all(k(Object.keys(F),function(e){return F[e].length?r.update(e,F[e],S):null}))}).then(function(){return r.endTransaction()}).catch(function(e){throw r&&r.endTransaction(e),e}).then(function(){var r,t={};t[U]={},t[U][x]=Y;for(r in F)F[r].length&&(r!==x?t[U][r]=F[r]:t[U][x]=t[U][x].concat(F[x]));return D.emit(P,t),e})}},{"../common/apply_update":10,"../common/array/find":11,"../common/array/includes":12,"../common/array/map":13,"../common/assign":17,"../common/clone":19,"../common/constants":20,"../common/deep_equal":21,"../common/errors":22,"../common/message":25,"../common/promise":27,"../record_type/enforce":44,"./check_links":30,"./update_helpers":38,"./validate_records":39}],38:[function(e,r,t){"use strict";var n=e("../common/array/find"),o=e("../common/keys"),i=o.primary;t.getUpdate=function(e,r,t,o){var a;return o[e]&&o[e][r]?n(t[e],function(e){return e[i]===r}):(a={id:r},t[e]||(t[e]=[]),t[e].push(a),o[e]={},o[e][r]=!0,a)},t.addId=function(e,r,t,n){return n?(r.push||(r.push={}),r.push[t]||(r.push[t]=[]),void r.push[t].push(e)):(r.replace||(r.replace={}),void(r.replace[t]=e))},t.removeId=function(e,r,t,n){return n?(r.pull||(r.pull={}),r.pull[t]||(r.pull[t]=[]),void r.pull[t].push(e)):(r.replace||(r.replace={}),void(r.replace[t]=null))}},{"../common/array/find":11,"../common/keys":24}],39:[function(e,r,t){"use strict";var n=e("../common/message"),o=e("../common/errors"),i=o.ConflictError,a=e("../common/keys"),u=a.link,s=a.isArray,f=a.inverse;r.exports=function(e,r,t,o){var a,c,l,d,p,h,y,m,g,v,w,b,E,A,k,x,P=this.recordTypes,U=o.language,T={};for(a=0,c=t.length;a<c;a++){if(m=t[a],E=r[m][u],A=r[m][f],k=r[m][s],x=P[E][A][s],k)for(l=0,d=e.length;l<d;l++)if(g=e[l],Array.isArray(g[m]))for(w=g[m],b={},p=0,h=w.length;p<h;p++){if(v=w[p],v in b)throw new i(n("CollisionDuplicate",U,{id:v,field:m}));b[v]=!0}if(!x)for(T[m]={},l=0,d=e.length;l<d;l++)for(g=e[l],y=g[m],w=Array.isArray(y)?y:y?[y]:[],p=0,h=w.length;p<h;p++){if(v=w[p],v in T[m])throw new i(n("CollisionToOne",U,{field:m}));T[m][v]=!0}}}},{"../common/errors":22,"../common/keys":24,"../common/message":25}],40:[function(e,r,t){"use strict";window.fortune=e("./browser")},{"./browser":9}],41:[function(e,r,t){"use strict";function n(e){return{request:function(r){return i(e,r)},state:function r(r){return i(e,null,r)},find:o.prototype.find,create:o.prototype.create,update:o.prototype.update,delete:o.prototype.delete}}var o=e("../core"),i=e("./websocket_request");r.exports=n},{"../core":29,"./websocket_request":42}],42:[function(e,r,t){"use strict";function n(e,r,t){var n,a=i.Promise,s=u(),f={id:s},c=e.readyState;if(r&&t)throw new Error("Must specify only options or state.");if(r)f.request=r;else{if(!t)throw new Error("Missing argument options or state.");f.state=t}if(c>1)throw new Error("WebSocket Client is closing or has been closed.");return(0===c?new a(function(r,t){n=t,e.addEventListener("open",r,{once:!0}),e.addEventListener("error",t,{once:!0})}):a.resolve()).then(function(){return e.removeEventListener("error",n),new a(function(r,t){function n(i){var a;if("decoded"in i)a=i.decoded;else try{a=i.decoded=o.decode(new Uint8Array(i.data))}catch(e){return t(e)}return a.id!==s?null:(e.removeEventListener("message",n),"error"in a?t(new Error(a.error||"No error specified.")):r(a))}e.binaryType="arraybuffer",e.addEventListener("message",n),e.send(o.encode(f))})})}var o=e("msgpack-lite"),i=e("../common/promise"),a=e("../adapter/adapters/common"),u=a.generateId;r.exports=n},{"../adapter/adapters/common":1,"../common/promise":27,"msgpack-lite":55}],43:[function(e,r,t){"use strict";function n(e,r,t){function n(e){var n,o,i,c,l=[];if("decoded"in e)n=e.decoded;else try{n=e.decoded=a.decode(new Uint8Array(e.data))}catch(e){return r.emit(f,e)}if(!("changes"in n))return null;o=void 0===t?n.changes:t(n.changes);for(i in o)for(c in o[i])l.push(r.adapter[i](c,o[i][c]));return u.all(l).then(function(){r.emit(s,o)},function(e){r.emit(f,e)})}var u=i.Promise;if(!(r instanceof o))throw new TypeError("An instance of Fortune is required.");return e.binaryType="arraybuffer",e.addEventListener("message",n),n}var o=e("../core"),i=e("../common/promise"),a=e("msgpack-lite"),u=e("../common/constants"),s=u.sync,f=u.failure;r.exports=n},{"../common/constants":20,"../common/promise":27,"../core":29,"msgpack-lite":55}],44:[function(e,r,t){(function(t){"use strict";function n(e,r,t,n){var o,u=n.language;if(null!==t&&(o=a(h,function(r){return r[0]===e[l]}),o=o?o[1]:e[l],!o(t)))throw new s(i(e[p]?"EnforceValueArray":"EnforceValue",u,{key:r,type:e[l].name}))}function o(e){return function(r){return e===r}}var i=e("../common/message"),a=e("../common/array/find"),u=e("../common/errors"),s=u.BadRequestError,f=e("../common/keys"),c=f.primary,l=f.type,d=f.link,p=f.isArray,h=[[String,function(e){return"string"==typeof e}],[Number,function(e){return"number"==typeof e}],[Boolean,function(e){return"boolean"==typeof e}],[Date,function(e){return e&&"function"==typeof e.getTime&&!Number.isNaN(e.getTime())}],[Object,function(e){return null!==e&&"object"==typeof e}],[t,function(e){return t.isBuffer(e)}]];r.exports=function(e,r,t,u){var f,h,y,m,g,v;u||(u={}),v=u.language;for(y in r)if(g=t[y])if(m=r[y],g[l])if(g[p]){if(!Array.isArray(m))throw new s(i("EnforceArrayType",v,{key:y,type:g[l].name}));for(f=0,h=m.length;f<h;f++)n(g,y,m[f],u)}else n(g,y,m,u);else if(g[d]){if(g[p]){if(!Array.isArray(m))throw new s(i("EnforceArray",v,{key:y}));if(e===g[d]&&a(m,o(r[c])))throw new s(i("EnforceSameID",v,{key:y}));continue}if(Array.isArray(m))throw new s(i("EnforceSingular",v,{key:y}));if(e===g[d]&&r[c]===m)throw new s(i("EnforceSameID",v,{key:y}))}else;else y!==c&&delete r[y];return r}}).call(this,e("buffer").Buffer)},{"../common/array/find":11,"../common/errors":22,"../common/keys":24,"../common/message":25,buffer:48}],45:[function(e,r,t){"use strict";var n=e("../common/keys"),o=n.link,i=n.inverse,a=n.isArray,u=n.denormalizedInverse,s="__",f="_",c="_inverse";r.exports=function(e){var r,t,n,l,d,p;for(r in e)for(t in e[r])if(n=e[r][t],o in n){if(!(n[o]in e))throw new Error('The value for "'+o+'" on "'+t+'" in type "'+r+'" is invalid, the record type does not exist.');if(l=e[n[o]],i in n){if(!(n[i]in l))throw new Error('The value for "'+i+'" on "'+t+'" in type "'+r+'" is invalid, the field does not exist.');if(l[n[i]][i]!==t)throw new Error('The value for "'+i+'" on "'+t+'" in type "'+r+'" is invalid, the inversely related field must define its inverse as "'+t+'".');if(l[n[i]][o]!==r)throw new Error('The value for "'+o+'" on "'+t+'" in type "'+r+'" is invalid, the inversely related field must define its link as "'+r+'".')}else d=s+r+f+t+c,Object.defineProperty(n,i,{value:d}),p={},p[o]=r,p[i]=t,p[a]=!0,p[u]=!0,Object.defineProperty(l,d,{value:p})}}},{"../common/keys":24}],46:[function(e,r,t){(function(t){"use strict";function n(e,r){var t=e[r]=o(e[r]);if("object"!=typeof t||t.constructor!==Object)throw new TypeError('The definition of "'+r+'" must be an object.');if(r===u)throw new Error('Can not define primary key "'+u+'".');if(r in p)throw new Error('Can not define "'+r+'" which is in Object.prototype.');if(!t[s]&&!t[f])throw new Error('The definition of "'+r+'" must contain either the "'+s+'" or "'+f+'" property.');if(t[s]&&t[f])throw new Error('Can not define both "'+s+'" and "'+f+'" on "'+r+'".');if(t[s]){if(!i(d,function(e){return e===t[s]})&&"function"!=typeof t[s])throw new Error('The "'+s+'" on "'+r+'" is invalid.');if("function"==typeof t[s]&&!i(d,function(e){return e===t[s].prototype.constructor}))throw new Error('The "'+s+'" on "'+r+'" must inherit from a valid native type.');if(t[c])throw new Error('The field "'+c+'" may not be defined on "'+r+'".')}if(t[f]){if("string"!=typeof t[f])throw new TypeError('The "'+f+'" on "'+r+'" must be a string.');if(t[c]&&"string"!=typeof t[c])throw new TypeError('The "'+c+'" on "'+r+'" must be a string.')}if(t[l]&&"boolean"!=typeof t[l])throw new TypeError('The key "'+l+'" on "'+r+'" must be a boolean.')}function o(e){var r;if("string"==typeof e)r={link:e};else if("function"==typeof e)r={type:e};else{if(!Array.isArray(e))return e;r={},e[1]?r.inverse=e[1]:r.isArray=!0,Array.isArray(e[0])?(r.isArray=!0,e=e[0][0]):e=e[0],"string"==typeof e?r.link=e:"function"==typeof e&&(r.type=e)}return r}var i=e("../common/array/find"),a=e("../common/keys"),u=a.primary,s=a.type,f=a.link,c=a.inverse,l=a.isArray,d=[String,Number,Boolean,Date,Object,t],p={};r.exports=function(e){var r;if("object"!=typeof e)throw new TypeError("Type definition must be an object.");for(r in e)n(e,r);return e}}).call(this,e("buffer").Buffer)},{"../common/array/find":11,"../common/keys":24,buffer:48}],47:[function(e,r,t){"use strict";function n(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,t=e.length;r<t;++r)s[r]=e[r],f[e.charCodeAt(r)]=r;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63}function o(e){var r,t,n,o,i,a,u=e.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===e[u-2]?2:"="===e[u-1]?1:0,a=new c(3*u/4-i),n=i>0?u-4:u;var s=0;for(r=0,t=0;r<n;r+=4,t+=3)o=f[e.charCodeAt(r)]<<18|f[e.charCodeAt(r+1)]<<12|f[e.charCodeAt(r+2)]<<6|f[e.charCodeAt(r+3)],a[s++]=o>>16&255,a[s++]=o>>8&255,a[s++]=255&o;return 2===i?(o=f[e.charCodeAt(r)]<<2|f[e.charCodeAt(r+1)]>>4,a[s++]=255&o):1===i&&(o=f[e.charCodeAt(r)]<<10|f[e.charCodeAt(r+1)]<<4|f[e.charCodeAt(r+2)]>>2,a[s++]=o>>8&255,a[s++]=255&o),a}function i(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function a(e,r,t){for(var n,o=[],a=r;a<t;a+=3)n=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(i(n));return o.join("")}function u(e){for(var r,t=e.length,n=t%3,o="",i=[],u=16383,f=0,c=t-n;f<c;f+=u)i.push(a(e,f,f+u>c?c:f+u));return 1===n?(r=e[t-1],o+=s[r>>2],o+=s[r<<4&63],o+="=="):2===n&&(r=(e[t-2]<<8)+e[t-1],o+=s[r>>10],o+=s[r>>4&63],o+=s[r<<2&63],o+="="),i.push(o),i.join("")}t.toByteArray=o,t.fromByteArray=u;var s=[],f=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array;n()},{}],48:[function(e,r,t){(function(r){"use strict";function n(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function o(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,r){if(o()<r)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(r),e.__proto__=a.prototype):(null===e&&(e=new a(r)),e.length=r),e}function a(e,r,t){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,r,t);if("number"==typeof e){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return u(this,e,r,t)}function u(e,r,t,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?p(e,r,t,n):"string"==typeof r?l(e,r,t):h(e,r)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number')}function f(e,r,t,n){return s(r),r<=0?i(e,r):void 0!==t?"string"==typeof n?i(e,r).fill(t,n):i(e,r).fill(t):i(e,r)}function c(e,r){if(s(r),e=i(e,r<0?0:0|y(r)),!a.TYPED_ARRAY_SUPPORT)for(var t=0;t<r;++t)e[t]=0;return e}function l(e,r,t){if("string"==typeof t&&""!==t||(t="utf8"),!a.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var n=0|g(r,t);return e=i(e,n),e.write(r,t),e}function d(e,r){var t=0|y(r.length);e=i(e,t);for(var n=0;n<t;n+=1)e[n]=255&r[n];return e}function p(e,r,t,n){if(r.byteLength,t<0||r.byteLength<t)throw new RangeError("'offset' is out of bounds");if(r.byteLength<t+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===t&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,t):new Uint8Array(r,t,n),a.TYPED_ARRAY_SUPPORT?(e=r,e.__proto__=a.prototype):e=d(e,r),e}function h(e,r){if(a.isBuffer(r)){var t=0|y(r.length);return e=i(e,t),0===e.length?e:(r.copy(e,0,0,t),e)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||G(r.length)?i(e,0):d(e,r);if("Buffer"===r.type&&Z(r.data))return d(e,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),a.alloc(+e)}function g(e,r){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var t=e.length;if(0===t)return 0;for(var n=!1;;)switch(r){case"ascii":case"binary":case"raw":case"raws":return t;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t;case"hex":return t>>>1;case"base64":return J(e).length;default:if(n)return K(e).length;r=(""+r).toLowerCase(),n=!0}}function v(e,r,t){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===t||t>this.length)&&(t=this.length),t<=0)return"";if(t>>>=0,r>>>=0,t<=r)return"";for(e||(e="utf8");;)switch(e){case"hex":return S(this,r,t);case"utf8":case"utf-8":return B(this,r,t);case"ascii":return _(this,r,t);case"binary":return I(this,r,t);case"base64":return T(this,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,r,t);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function w(e,r,t){var n=e[r];e[r]=e[t],e[t]=n}function b(e,r,t,n){function o(e,r){return 1===i?e[r]:e.readUInt16BE(r*i)}var i=1,a=e.length,u=r.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||r.length<2)return-1;i=2,a/=2,u/=2,t/=2}for(var s=-1,f=t;f<a;++f)if(o(e,f)===o(r,s===-1?0:f-s)){if(s===-1&&(s=f),f-s+1===u)return s*i}else s!==-1&&(f-=f-s),s=-1;return-1}function E(e,r,t,n){t=Number(t)||0;var o=e.length-t;n?(n=Number(n),n>o&&(n=o)):n=o;var i=r.length;if(i%2!==0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var u=parseInt(r.substr(2*a,2),16);if(isNaN(u))return a;e[t+a]=u}return a}function A(e,r,t,n){return Q(K(r,e.length-t),e,t,n)}function k(e,r,t,n){return Q(W(r),e,t,n)}function x(e,r,t,n){return k(e,r,t,n)}function P(e,r,t,n){return Q(J(r),e,t,n)}function U(e,r,t,n){return Q(V(r,e.length-t),e,t,n)}function T(e,r,t){return 0===r&&t===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(r,t))}function B(e,r,t){t=Math.min(e.length,t);for(var n=[],o=r;o<t;){var i=e[o],a=null,u=i>239?4:i>223?3:i>191?2:1;if(o+u<=t){var s,f,c,l;switch(u){case 1:i<128&&(a=i);break;case 2:s=e[o+1],128===(192&s)&&(l=(31&i)<<6|63&s,l>127&&(a=l));break;case 3:s=e[o+1],f=e[o+2],128===(192&s)&&128===(192&f)&&(l=(15&i)<<12|(63&s)<<6|63&f,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:s=e[o+1],f=e[o+2],c=e[o+3],128===(192&s)&&128===(192&f)&&128===(192&c)&&(l=(15&i)<<18|(63&s)<<12|(63&f)<<6|63&c,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,u=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),o+=u}return R(n)}function R(e){var r=e.length;if(r<=$)return String.fromCharCode.apply(String,e);for(var t="",n=0;n<r;)t+=String.fromCharCode.apply(String,e.slice(n,n+=$));return t}function _(e,r,t){var n="";t=Math.min(e.length,t);for(var o=r;o<t;++o)n+=String.fromCharCode(127&e[o]);return n}function I(e,r,t){var n="";t=Math.min(e.length,t);for(var o=r;o<t;++o)n+=String.fromCharCode(e[o]);return n}function S(e,r,t){var n=e.length;(!r||r<0)&&(r=0),(!t||t<0||t>n)&&(t=n);for(var o="",i=r;i<t;++i)o+=z(e[i]);return o}function O(e,r,t){for(var n=e.slice(r,t),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function D(e,r,t){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+r>t)throw new RangeError("Trying to access beyond buffer length")}function j(e,r,t,n,o,i){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<i)throw new RangeError('"value" argument is out of bounds');if(t+n>e.length)throw new RangeError("Index out of range")}function C(e,r,t,n){r<0&&(r=65535+r+1);for(var o=0,i=Math.min(e.length-t,2);o<i;++o)e[t+o]=(r&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function M(e,r,t,n){r<0&&(r=4294967295+r+1);for(var o=0,i=Math.min(e.length-t,4);o<i;++o)e[t+o]=r>>>8*(n?o:3-o)&255}function L(e,r,t,n,o,i){if(t+n>e.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function N(e,r,t,n,o){return o||L(e,r,t,4,3.4028234663852886e38,-3.4028234663852886e38),H.write(e,r,t,n,23,4),t+4}function q(e,r,t,n,o){return o||L(e,r,t,8,1.7976931348623157e308,-1.7976931348623157e308),H.write(e,r,t,n,52,8),t+8}function F(e){if(e=Y(e).replace(ee,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function Y(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,r){r=r||1/0;for(var t,n=e.length,o=null,i=[],a=0;a<n;++a){if(t=e.charCodeAt(a),t>55295&&t<57344){if(!o){if(t>56319){(r-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(r-=3)>-1&&i.push(239,191,189);continue}o=t;continue}if(t<56320){(r-=3)>-1&&i.push(239,191,189),o=t;continue}t=(o-55296<<10|t-56320)+65536}else o&&(r-=3)>-1&&i.push(239,191,189);if(o=null,t<128){if((r-=1)<0)break;i.push(t)}else if(t<2048){if((r-=2)<0)break;i.push(t>>6|192,63&t|128)}else if(t<65536){if((r-=3)<0)break;i.push(t>>12|224,t>>6&63|128,63&t|128)}else{if(!(t<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;i.push(t>>18|240,t>>12&63|128,t>>6&63|128,63&t|128)}}return i}function W(e){for(var r=[],t=0;t<e.length;++t)r.push(255&e.charCodeAt(t));return r}function V(e,r){for(var t,n,o,i=[],a=0;a<e.length&&!((r-=2)<0);++a)t=e.charCodeAt(a),n=t>>8,o=t%256,i.push(o),i.push(n);return i}function J(e){return X.toByteArray(F(e))}function Q(e,r,t,n){for(var o=0;o<n&&!(o+t>=r.length||o>=e.length);++o)r[o+t]=e[o];return o}function G(e){return e!==e}var X=e("base64-js"),H=e("ieee754"),Z=e("isarray");t.Buffer=a,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==r.TYPED_ARRAY_SUPPORT?r.TYPED_ARRAY_SUPPORT:n(),t.kMaxLength=o(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,r,t){return u(null,e,r,t)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,r,t){return f(null,e,r,t)},a.allocUnsafe=function(e){return c(null,e)},a.allocUnsafeSlow=function(e){return c(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,r){if(!a.isBuffer(e)||!a.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(e===r)return 0;for(var t=e.length,n=r.length,o=0,i=Math.min(t,n);o<i;++o)if(e[o]!==r[o]){t=e[o],n=r[o];break}return t<n?-1:n<t?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,r){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var t;if(void 0===r)for(r=0,t=0;t<e.length;++t)r+=e[t].length;var n=a.allocUnsafe(r),o=0;for(t=0;t<e.length;++t){var i=e[t];if(!a.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,o),o+=i.length}return n},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<e;r+=2)w(this,r,r+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<e;r+=4)w(this,r,r+3),w(this,r+1,r+2);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?B(this,0,e):v.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,r,t,n,o){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===t&&(t=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),r<0||t>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&r>=t)return 0;if(n>=o)return-1;if(r>=t)return 1;if(r>>>=0,t>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var i=o-n,u=t-r,s=Math.min(i,u),f=this.slice(n,o),c=e.slice(r,t),l=0;l<s;++l)if(f[l]!==c[l]){i=f[l],u=c[l];break}return i<u?-1:u<i?1:0},a.prototype.indexOf=function(e,r,t){if("string"==typeof r?(t=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r>>=0,0===this.length)return-1;if(r>=this.length)return-1;if(r<0&&(r=Math.max(this.length+r,0)),"string"==typeof e&&(e=a.from(e,t)),a.isBuffer(e))return 0===e.length?-1:b(this,e,r,t);if("number"==typeof e)return a.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,r):b(this,[e],r,t);throw new TypeError("val must be string, number or Buffer")},a.prototype.includes=function(e,r,t){return this.indexOf(e,r,t)!==-1},a.prototype.write=function(e,r,t,n){if(void 0===r)n="utf8",t=this.length,r=0;else if(void 0===t&&"string"==typeof r)n=r,t=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r=0|r,isFinite(t)?(t=0|t,void 0===n&&(n="utf8")):(n=t,t=void 0)}var o=this.length-r;if((void 0===t||t>o)&&(t=o),e.length>0&&(t<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return E(this,e,r,t);case"utf8":case"utf-8":return A(this,e,r,t);case"ascii":return k(this,e,r,t);case"binary":return x(this,e,r,t);case"base64":return P(this,e,r,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,r,t);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;a.prototype.slice=function(e,r){var t=this.length;e=~~e,r=void 0===r?t:~~r,e<0?(e+=t,e<0&&(e=0)):e>t&&(e=t),r<0?(r+=t,r<0&&(r=0)):r>t&&(r=t),r<e&&(r=e);var n;if(a.TYPED_ARRAY_SUPPORT)n=this.subarray(e,r),n.__proto__=a.prototype;else{var o=r-e;n=new a(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},a.prototype.readUIntLE=function(e,r,t){e=0|e,r=0|r,t||D(e,r,this.length);for(var n=this[e],o=1,i=0;++i<r&&(o*=256);)n+=this[e+i]*o;return n},a.prototype.readUIntBE=function(e,r,t){e=0|e,r=0|r,t||D(e,r,this.length);for(var n=this[e+--r],o=1;r>0&&(o*=256);)n+=this[e+--r]*o;return n},a.prototype.readUInt8=function(e,r){return r||D(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,r){return r||D(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,r){return r||D(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,r){return r||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,r){return r||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,r,t){e=0|e,r=0|r,t||D(e,r,this.length);for(var n=this[e],o=1,i=0;++i<r&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*r)),n},a.prototype.readIntBE=function(e,r,t){e=0|e,r=0|r,t||D(e,r,this.length);for(var n=r,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*r)),i},a.prototype.readInt8=function(e,r){return r||D(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,r){r||D(e,2,this.length);var t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t;
},a.prototype.readInt16BE=function(e,r){r||D(e,2,this.length);var t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},a.prototype.readInt32LE=function(e,r){return r||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,r){return r||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,r){return r||D(e,4,this.length),H.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,r){return r||D(e,4,this.length),H.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,r){return r||D(e,8,this.length),H.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,r){return r||D(e,8,this.length),H.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,r,t,n){if(e=+e,r=0|r,t=0|t,!n){var o=Math.pow(2,8*t)-1;j(this,e,r,t,o,0)}var i=1,a=0;for(this[r]=255&e;++a<t&&(i*=256);)this[r+a]=e/i&255;return r+t},a.prototype.writeUIntBE=function(e,r,t,n){if(e=+e,r=0|r,t=0|t,!n){var o=Math.pow(2,8*t)-1;j(this,e,r,t,o,0)}var i=t-1,a=1;for(this[r+i]=255&e;--i>=0&&(a*=256);)this[r+i]=e/a&255;return r+t},a.prototype.writeUInt8=function(e,r,t){return e=+e,r=0|r,t||j(this,e,r,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[r]=255&e,r+1},a.prototype.writeUInt16LE=function(e,r,t){return e=+e,r=0|r,t||j(this,e,r,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):C(this,e,r,!0),r+2},a.prototype.writeUInt16BE=function(e,r,t){return e=+e,r=0|r,t||j(this,e,r,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):C(this,e,r,!1),r+2},a.prototype.writeUInt32LE=function(e,r,t){return e=+e,r=0|r,t||j(this,e,r,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=255&e):M(this,e,r,!0),r+4},a.prototype.writeUInt32BE=function(e,r,t){return e=+e,r=0|r,t||j(this,e,r,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):M(this,e,r,!1),r+4},a.prototype.writeIntLE=function(e,r,t,n){if(e=+e,r=0|r,!n){var o=Math.pow(2,8*t-1);j(this,e,r,t,o-1,-o)}var i=0,a=1,u=0;for(this[r]=255&e;++i<t&&(a*=256);)e<0&&0===u&&0!==this[r+i-1]&&(u=1),this[r+i]=(e/a>>0)-u&255;return r+t},a.prototype.writeIntBE=function(e,r,t,n){if(e=+e,r=0|r,!n){var o=Math.pow(2,8*t-1);j(this,e,r,t,o-1,-o)}var i=t-1,a=1,u=0;for(this[r+i]=255&e;--i>=0&&(a*=256);)e<0&&0===u&&0!==this[r+i+1]&&(u=1),this[r+i]=(e/a>>0)-u&255;return r+t},a.prototype.writeInt8=function(e,r,t){return e=+e,r=0|r,t||j(this,e,r,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[r]=255&e,r+1},a.prototype.writeInt16LE=function(e,r,t){return e=+e,r=0|r,t||j(this,e,r,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8):C(this,e,r,!0),r+2},a.prototype.writeInt16BE=function(e,r,t){return e=+e,r=0|r,t||j(this,e,r,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[r]=e>>>8,this[r+1]=255&e):C(this,e,r,!1),r+2},a.prototype.writeInt32LE=function(e,r,t){return e=+e,r=0|r,t||j(this,e,r,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[r]=255&e,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24):M(this,e,r,!0),r+4},a.prototype.writeInt32BE=function(e,r,t){return e=+e,r=0|r,t||j(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=255&e):M(this,e,r,!1),r+4},a.prototype.writeFloatLE=function(e,r,t){return N(this,e,r,!0,t)},a.prototype.writeFloatBE=function(e,r,t){return N(this,e,r,!1,t)},a.prototype.writeDoubleLE=function(e,r,t){return q(this,e,r,!0,t)},a.prototype.writeDoubleBE=function(e,r,t){return q(this,e,r,!1,t)},a.prototype.copy=function(e,r,t,n){if(t||(t=0),n||0===n||(n=this.length),r>=e.length&&(r=e.length),r||(r=0),n>0&&n<t&&(n=t),n===t)return 0;if(0===e.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-r<n-t&&(n=e.length-r+t);var o,i=n-t;if(this===e&&t<r&&r<n)for(o=i-1;o>=0;--o)e[o+r]=this[o+t];else if(i<1e3||!a.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+r]=this[o+t];else Uint8Array.prototype.set.call(e,this.subarray(t,t+i),r);return i},a.prototype.fill=function(e,r,t,n){if("string"==typeof e){if("string"==typeof r?(n=r,r=0,t=this.length):"string"==typeof t&&(n=t,t=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!a.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e=255&e);if(r<0||this.length<r||this.length<t)throw new RangeError("Out of range index");if(t<=r)return this;r>>>=0,t=void 0===t?this.length:t>>>0,e||(e=0);var i;if("number"==typeof e)for(i=r;i<t;++i)this[i]=e;else{var u=a.isBuffer(e)?e:K(new a(e,n).toString()),s=u.length;for(i=0;i<t-r;++i)this[i+r]=u[i%s]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":47,ieee754:52,isarray:49}],49:[function(e,r,t){var n={}.toString;r.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],50:[function(e,r,t){"use strict";function n(e){var r;if(!e||"string"!=typeof e)throw new TypeError('Argument "name" must be a non-empty string.');return r=new Function("setupError","return function "+e+" () { if (!(this instanceof "+e+")) return new ("+e+".bind.apply("+e+", Array.prototype.concat.apply([ null ], arguments))); setupError.apply(this, arguments); }")(o),r.prototype=Object.create(Error.prototype,{constructor:i(r),name:i(e)}),r}function o(e){a?Error.captureStackTrace(this,this.constructor):Object.defineProperty(this,"stack",i(Error(e).stack)),Object.defineProperty(this,"message",i(void 0!==e?""+e:""))}function i(e){return{value:e,writable:!0,configurable:!0}}var a="captureStackTrace"in Error;r.exports=n},{}],51:[function(e,r,t){function n(){if(!(this instanceof n))return new n}!function(e){function t(e){for(var r in f)e[r]=f[r];return e}function n(e,r){return u(this,e).push(r),this}function o(e,r){function t(){i.call(n,e,t),r.apply(this,arguments)}var n=this;return t.originalListener=r,u(n,e).push(t),n}function i(e,r){function t(e){return e!==r&&e.originalListener!==r}var n,o=this;if(arguments.length){if(r){if(n=u(o,e,!0)){if(n=n.filter(t),!n.length)return i.call(o,e);o[s][e]=n}}else if(n=o[s],n&&(delete n[e],!Object.keys(n).length))return i.call(o)}else delete o[s];return o}function a(e,r){function t(e){e.call(i)}function n(e){e.call(i,r)}function o(e){e.apply(i,f)}var i=this,a=u(i,e,!0);if(!a)return!1;var s=arguments.length;if(1===s)a.forEach(t);else if(2===s)a.forEach(n);else{var f=Array.prototype.slice.call(arguments,1);a.forEach(o)}return!!a.length}function u(e,r,t){if(!t||e[s]){var n=e[s]||(e[s]={});return n[r]||(n[r]=[])}}"undefined"!=typeof r&&(r.exports=e);var s="listeners",f={on:n,once:o,off:i,emit:a};t(e.prototype),e.mixin=t}(n)},{}],52:[function(e,r,t){t.read=function(e,r,t,n,o){var i,a,u=8*o-n-1,s=(1<<u)-1,f=s>>1,c=-7,l=t?o-1:0,d=t?-1:1,p=e[r+l];for(l+=d,i=p&(1<<-c)-1,p>>=-c,c+=u;c>0;i=256*i+e[r+l],l+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+e[r+l],l+=d,c-=8);if(0===i)i=1-f;else{if(i===s)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,n),i-=f}return(p?-1:1)*a*Math.pow(2,i-n)},t.write=function(e,r,t,n,o,i){var a,u,s,f=8*i-o-1,c=(1<<f)-1,l=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,h=n?1:-1,y=r<0||0===r&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(u=isNaN(r)?1:0,a=c):(a=Math.floor(Math.log(r)/Math.LN2),r*(s=Math.pow(2,-a))<1&&(a--,s*=2),r+=a+l>=1?d/s:d*Math.pow(2,1-l),r*s>=2&&(a++,s/=2),a+l>=c?(u=0,a=c):a+l>=1?(u=(r*s-1)*Math.pow(2,o),a+=l):(u=r*Math.pow(2,l-1)*Math.pow(2,o),a=0));o>=8;e[t+p]=255&u,p+=h,u/=256,o-=8);for(a=a<<o|u,f+=o;f>0;e[t+p]=255&a,p+=h,a/=256,f-=8);e[t+p-h]|=128*y}},{}],53:[function(e,r,t){(function(e){var r,n,o,i;!function(t){function a(e,r,n){function o(e,r,t,n){return this instanceof o?a(this,e,r,t,n):new o(e,r,t,n)}function i(e){return!(!e||!e[q])}function a(e,r,t,n,o){if(E&&A&&(r instanceof A&&(r=new E(r)),n instanceof A&&(n=new E(n))),!(r||t||n||v))return void(e.buffer=d(k,0));if(!c(r,t)){var i=v||Array;o=t,n=r,t=0,r=new i(8)}e.buffer=r,e.offset=t|=0,w!==typeof n&&("string"==typeof n?g(r,t,n,o||10):c(n,o)?l(r,t,n,o):"number"==typeof o?(B(r,t+_,n),B(r,t+I,o)):n>0?C(r,t,n):n<0?M(r,t,n):l(r,t,k,0))}function g(e,r,t,n){var o=0,i=t.length,a=0,u=0;"-"===t[0]&&o++;for(var s=o;o<i;){var f=parseInt(t[o++],n);if(!(f>=0))break;u=u*n+f,a=a*n+Math.floor(u/P),u%=P}s&&(a=~a,u?u=P-u:a++),B(e,r+_,a),B(e,r+I,u)}function x(){var e=this.buffer,r=this.offset,t=R(e,r+_),o=R(e,r+I);return n||(t|=0),t?t*P+o:o}function T(e){var r=this.buffer,t=this.offset,o=R(r,t+_),i=R(r,t+I),a="",u=!n&&2147483648&o;for(u&&(o=~o,i=P-i),e=e||10;;){var s=o%e*P+i;if(o=Math.floor(o/e),i=Math.floor(s/e),a=(s%e).toString(e)+a,!o&&!i)break}return u&&(a="-"+a),a}function B(e,r,t){e[r+j]=255&t,t>>=8,e[r+D]=255&t,t>>=8,e[r+O]=255&t,t>>=8,e[r+S]=255&t}function R(e,r){return e[r+S]*U+(e[r+O]<<16)+(e[r+D]<<8)+e[r+j]}var _=r?0:4,I=r?4:0,S=r?0:3,O=r?1:2,D=r?2:1,j=r?3:0,C=r?p:y,M=r?h:m,L=o.prototype,N="is"+e,q="_"+N;return L.buffer=void 0,L.offset=0,L[q]=!0,L.toNumber=x,L.toString=T,L.toJSON=x,L.toArray=u,b&&(L.toBuffer=s),E&&(L.toArrayBuffer=f),o[N]=i,t[e]=o,o}function u(e){var r=this.buffer,t=this.offset;return v=null,e!==!1&&0===t&&8===r.length&&x(r)?r:d(r,t)}function s(r){var t=this.buffer,n=this.offset;if(v=b,r!==!1&&0===n&&8===t.length&&e.isBuffer(t))return t;var o=new b(8);return l(o,0,t,n),o}function f(e){var r=this.buffer,t=this.offset,n=r.buffer;if(v=E,e!==!1&&0===t&&n instanceof A&&8===n.byteLength)return n;var o=new E(8);return l(o,0,r,t),o.buffer}function c(e,r){var t=e&&e.length;return r|=0,t&&r+8<=t&&"string"!=typeof e[r]}function l(e,r,t,n){r|=0,n|=0;for(var o=0;o<8;o++)e[r++]=255&t[n++]}function d(e,r){return Array.prototype.slice.call(e,r,r+8)}function p(e,r,t){for(var n=r+8;n>r;)e[--n]=255&t,t/=256}function h(e,r,t){var n=r+8;for(t++;n>r;)e[--n]=255&-t^255,t/=256}function y(e,r,t){for(var n=r+8;r<n;)e[r++]=255&t,t/=256}function m(e,r,t){var n=r+8;for(t++;r<n;)e[r++]=255&-t^255,t/=256}function g(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)}var v,w="undefined",b=w!==typeof e&&e,E=w!==typeof Uint8Array&&Uint8Array,A=w!==typeof ArrayBuffer&&ArrayBuffer,k=[0,0,0,0,0,0,0,0],x=Array.isArray||g,P=4294967296,U=16777216;r=a("Uint64BE",!0,!0),n=a("Int64BE",!0,!1),o=a("Uint64LE",!1,!0),i=a("Int64LE",!1,!1)}("object"==typeof t&&"string"!=typeof t.nodeName?t:this||{})}).call(this,e("buffer").Buffer)},{buffer:48}],54:[function(e,r,t){r.exports=function(e){return!(null==e||!(e._isBuffer||e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)))}},{}],55:[function(e,r,t){t.encode=e("./encode").encode,t.decode=e("./decode").decode,t.Encoder=e("./encoder").Encoder,t.Decoder=e("./decoder").Decoder,t.createCodec=e("./ext").createCodec,t.codec=e("./codec").codec},{"./codec":58,"./decode":60,"./decoder":61,"./encode":63,"./encoder":64,"./ext":67}],56:[function(e,r,t){function n(e,r){for(var t=this,n=r||0,o=e.length,i=0;i<o;i++){var a=e.charCodeAt(i);a<128?t[n++]=a:a<2048?(t[n++]=192|a>>6,t[n++]=128|63&a):(t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a)}return n-r}function o(e,r){var t=this,n=e-0||0;r||(r=t.length);var o=r-e;o>d&&(o=d);for(var i=[];n<r;){for(var a=new Array(o),u=0;u<o&&n<r;){var s=t[n++];s=s<128?s:s<224?(63&s)<<6|63&t[n++]:(63&s)<<12|(63&t[n++])<<6|63&t[n++],a[u++]=s}u<o&&(a=a.slice(0,u)),i.push(String.fromCharCode.apply("",a))}return i.length>1?i.join(""):i.length?i.shift():""}function i(e){var r=0;return Array.prototype.forEach.call(e,function(e){var t=e.charCodeAt(0);r+=t<128?1:t<2048?2:3}),r}function a(e,r,t,n){var o;t||(t=0),n||0===n||(n=this.length),r||(r=0);var i=n-t;if(e===this&&t<r&&r<n)for(o=i-1;o>=0;o--)e[o+r]=this[o+t];else for(o=0;o<i;o++)e[o+r]=this[o+t];return i}function u(e,r){new c(this,r,e)}function s(e,r){new l(this,r,e)}var f=e("int64-buffer"),c=f.Uint64BE,l=f.Int64BE,d=8192;t.writeString=n,t.readString=o,t.byteLength=i,t.copy=a,t.writeUint64BE=u,t.writeInt64BE=s},{"int64-buffer":53}],57:[function(e,r,t){function n(){}t.BufferShortageError=n,n.prototype=Error.prototype},{}],58:[function(e,r,t){t.codec={preset:e("./ext").createCodec({preset:!0})}},{"./ext":67}],59:[function(e,r,t){(function(r){function n(e){return this instanceof n?void(e&&(this.options=e,e.codec&&(this.codec=e.codec))):new n(e)}t.DecodeBuffer=n;var o=e("./codec").codec.preset,i=e("./buffer-shortage").BufferShortageError;n.prototype.offset=0,n.prototype.push=function(e){var r=this.buffers||(this.buffers=[]);r.push(e)},n.prototype.codec=o,n.prototype.write=function(e){var t=this.offset?this.buffer.slice(this.offset):this.buffer;this.buffer=t?e?r.concat([t,e]):t:e,this.offset=0},n.prototype.read=function(){var e=this.buffers&&this.buffers.length;return e?(this.flush(),this.pull()):this.fetch()},n.prototype.pull=function(){var e=this.buffers||(this.buffers=[]);return e.shift()},n.prototype.fetch=function(){return this.codec.decode(this)},n.prototype.flush=function(){for(;this.offset<this.buffer.length;){var e,r=this.offset;try{e=this.fetch()}catch(e){if(!(e instanceof i))throw e;this.offset=r;break}this.push(e)}}}).call(this,e("buffer").Buffer)},{"./buffer-shortage":57,"./codec":58,buffer:48}],60:[function(e,r,t){function n(e,r){var t=new o(r);return t.write(e),t.read()}t.decode=n;var o=e("./decode-buffer").DecodeBuffer},{"./decode-buffer":59}],61:[function(e,r,t){function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.Decoder=n;var o=e("event-lite"),i=e("./decode-buffer").DecodeBuffer;n.prototype=new i,o.mixin(n.prototype),n.prototype.decode=function(e){arguments.length&&this.write(e),this.flush()},n.prototype.push=function(e){this.emit("data",e)},n.prototype.end=function(e){this.decode(e),this.emit("end")}},{"./decode-buffer":59,"event-lite":51}],62:[function(e,r,t){(function(r){function n(e){return this instanceof n?void(e&&(this.options=e,e.codec&&(this.codec=e.codec))):new n(e)}t.EncodeBuffer=n;var o=e("./codec").codec.preset,i=2048,a=65536;n.prototype.offset=0,n.prototype.start=0,n.prototype.push=function(e){var r=this.buffers||(this.buffers=[]);r.push(e)},n.prototype.codec=o,n.prototype.write=function(e){this.codec.encode(this,e)},n.prototype.read=function(){var e=this.buffers&&this.buffers.length;return e?(this.flush(),this.pull()):this.fetch()},n.prototype.pull=function(){var e=this.buffers||(this.buffers=[]),t=e.length>1?r.concat(e):e[0];return e.length=0,t},n.prototype.fetch=function(){var e=this.start;if(e<this.offset)return this.start=this.offset,this.buffer.slice(e,this.offset)},n.prototype.flush=function(){var e=this.fetch();e&&this.push(e)},n.prototype.reserve=function(e){if(this.buffer){var t=this.buffer.length;if(this.offset+e<t)return;this.flush(),e=Math.max(e,Math.min(2*t,a))}e=e>i?e:i,this.buffer=new r(e),this.start=0,this.offset=0},n.prototype.send=function(e){var r=this.offset+e.length;this.buffer&&r<this.buffer.length?(e.copy(this.buffer,this.offset),this.offset=r):(this.flush(),this.push(e))}}).call(this,e("buffer").Buffer)},{"./codec":58,buffer:48}],63:[function(e,r,t){function n(e,r){var t=new o(r);return t.write(e),t.read()}t.encode=n;var o=e("./encode-buffer").EncodeBuffer},{"./encode-buffer":62}],64:[function(e,r,t){function n(e){return this instanceof n?void i.call(this,e):new n(e)}t.Encoder=n;var o=e("event-lite"),i=e("./encode-buffer").EncodeBuffer;n.prototype=new i,o.mixin(n.prototype),n.prototype.encode=function(e){this.write(e),this.emit("data",this.read())},n.prototype.end=function(e){arguments.length&&this.encode(e),this.flush(),this.emit("end")}},{"./encode-buffer":62,"event-lite":51}],65:[function(e,r,t){function n(e,r){return this instanceof n?(this.buffer=e,void(this.type=r)):new n(e,r)}t.ExtBuffer=n},{}],66:[function(e,r,t){(function(r){function n(e){o(e),i(e)}function o(e){e.addExtPacker(14,Error,[d,a]),e.addExtPacker(1,EvalError,[d,a]),e.addExtPacker(2,RangeError,[d,a]),e.addExtPacker(3,ReferenceError,[d,a]),e.addExtPacker(4,SyntaxError,[d,a]),e.addExtPacker(5,TypeError,[d,a]),e.addExtPacker(6,URIError,[d,a]),e.addExtPacker(10,RegExp,[c,a]),e.addExtPacker(11,Boolean,[f,a]),e.addExtPacker(12,String,[f,a]),e.addExtPacker(13,Date,[Number,a]),e.addExtPacker(15,Number,[f,a]),b&&(e.addExtPacker(17,Int8Array,s),e.addExtPacker(18,Uint8Array,s),e.addExtPacker(19,Int16Array,y),e.addExtPacker(20,Uint16Array,y),e.addExtPacker(21,Int32Array,y),e.addExtPacker(22,Uint32Array,y),e.addExtPacker(23,Float32Array,y),E&&e.addExtPacker(24,Float64Array,y),A&&(e.addExtPacker(25,Uint8ClampedArray,s),e.addExtUnpacker(25,h(Uint8ClampedArray))),e.addExtPacker(26,ArrayBuffer,m),e.addExtPacker(29,DataView,y),e.addExtUnpacker(26,g),e.addExtUnpacker(29,[g,h(DataView)]))}function i(e){e.addExtPacker(14,Error,[d,a]),e.addExtPacker(1,EvalError,[d,a]),e.addExtPacker(2,RangeError,[d,a]),e.addExtPacker(3,ReferenceError,[d,a]),e.addExtPacker(4,SyntaxError,[d,a]),e.addExtPacker(5,TypeError,[d,a]),e.addExtPacker(6,URIError,[d,a]),e.addExtUnpacker(14,[u,p(Error)]),e.addExtUnpacker(1,[u,p(EvalError)]),e.addExtUnpacker(2,[u,p(RangeError)]),e.addExtUnpacker(3,[u,p(ReferenceError)]),e.addExtUnpacker(4,[u,p(SyntaxError)]),e.addExtUnpacker(5,[u,p(TypeError)]),e.addExtUnpacker(6,[u,p(URIError)]),e.addExtPacker(10,RegExp,[c,a]),e.addExtPacker(11,Boolean,[f,a]),e.addExtPacker(12,String,[f,a]),e.addExtPacker(13,Date,[Number,a]),e.addExtPacker(15,Number,[f,a]),e.addExtUnpacker(10,[u,l]),e.addExtUnpacker(11,[u,h(Boolean)]),e.addExtUnpacker(12,[u,h(String)]),e.addExtUnpacker(13,[u,h(Date)]),e.addExtUnpacker(15,[u,h(Number)]),b&&(e.addExtPacker(17,Int8Array,s),e.addExtPacker(18,Uint8Array,s),e.addExtPacker(19,Int16Array,y),e.addExtPacker(20,Uint16Array,y),e.addExtPacker(21,Int32Array,y),e.addExtPacker(22,Uint32Array,y),e.addExtPacker(23,Float32Array,y),e.addExtUnpacker(17,h(Int8Array)),e.addExtUnpacker(18,h(Uint8Array)),e.addExtUnpacker(19,[g,h(Int16Array)]),e.addExtUnpacker(20,[g,h(Uint16Array)]),e.addExtUnpacker(21,[g,h(Int32Array)]),e.addExtUnpacker(22,[g,h(Uint32Array)]),e.addExtUnpacker(23,[g,h(Float32Array)]),E&&(e.addExtPacker(24,Float64Array,y),e.addExtUnpacker(24,[g,h(Float64Array)])),A&&(e.addExtPacker(25,Uint8ClampedArray,s),e.addExtUnpacker(25,h(Uint8ClampedArray))),e.addExtPacker(26,ArrayBuffer,m),e.addExtPacker(29,DataView,y),e.addExtUnpacker(26,g),e.addExtUnpacker(29,[g,h(DataView)]))}function a(r){return v||(v=e("./encode").encode),v(r)}function u(r){return w||(w=e("./decode").decode),w(r)}function s(e){return new r(e)}function f(e){return e.valueOf()}function c(e){e=RegExp.prototype.toString.call(e).split("/"),e.shift();var r=[e.pop()];return r.unshift(e.join("/")),r}function l(e){return RegExp.apply(null,e)}function d(e){var r={};for(var t in k)r[t]=e[t];return r}function p(e){return function(r){var t=new e;for(var n in k)t[n]=r[n];return t}}function h(e){return function(r){return new e(r)}}function y(e){return new r(new Uint8Array(e.buffer))}function m(e){return new r(new Uint8Array(e))}function g(e){return new Uint8Array(e).buffer}t.setExtPreset=n;var v,w,b="undefined"!=typeof Uint8Array,E="undefined"!=typeof Float64Array,A="undefined"!=typeof Uint8ClampedArray,k={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1}}).call(this,e("buffer").Buffer)},{"./decode":60,"./encode":63,buffer:48}],67:[function(e,r,t){function n(e){return this instanceof n?(this.extPackers={},this.extUnpackers=[],this.encode=c.getEncoder(e),this.decode=f.getDecoder(e),void(e&&e.preset&&s.setExtPreset(this))):new n(e)}function o(e){return new n(e)}function i(e){function r(e,r){return r(e)}return e=e.slice(),function(t){return e.reduce(r,t)}}var a=e("isarray");t.createCodec=o;var u=e("./ext-buffer").ExtBuffer,s=e("./ext-preset"),f=e("./read-core"),c=e("./write-core");n.prototype.addExtPacker=function(e,r,t){function n(r){var n=t(r);return new u(n,e)}a(t)&&(t=i(t));var o=r.name;if(o&&"Object"!==o)this.extPackers[o]=n;else{var s=this.extEncoderList||(this.extEncoderList=[]);s.unshift([r,n])}},n.prototype.addExtUnpacker=function(e,r){this.extUnpackers[e]=a(r)?i(r):r},n.prototype.getExtPacker=function(e){var r=e.constructor,t=r&&r.name&&this.extPackers[r.name];if(t)return t;var n=this.extEncoderList;if(n)for(var o=n.length,i=0;i<o;i++){var a=n[i];if(r===a[0])return a[1]}},n.prototype.getExtUnpacker=function(e){function r(r){return new u(r,e)}return this.extUnpackers[e]||r}},{"./ext-buffer":65,"./ext-preset":66,"./read-core":68,"./write-core":71,isarray:75}],68:[function(e,r,t){function n(e){function r(e){var r=o(e),n=t[r];if(!n)throw new Error("Invalid type: "+(r?"0x"+r.toString(16):r));return n(e)}var t=i.getReadToken(e);return r}t.getDecoder=n;var o=e("./read-format").readUint8,i=e("./read-token")},{"./read-format":69,"./read-token":70}],69:[function(e,r,t){(function(r){function n(e){var t={map:o,array:i,str:a,bin:u,ext:s,uint8:f,uint16:c,uint32:l(4,r.prototype.readUInt32BE),uint64:l(8,d),int8:l(1,r.prototype.readInt8),int16:l(2,r.prototype.readInt16BE),int32:l(4,r.prototype.readInt32BE),int64:l(8,p),float32:l(4,m),float64:l(8,g)};return e&&e.int64&&(t.uint64=l(8,h),t.int64=l(8,y)),t}function o(e,r){var t,n={},o=new Array(r),i=new Array(r),a=e.codec.decode;for(t=0;t<r;t++)o[t]=a(e),i[t]=a(e);for(t=0;t<r;t++)n[o[t]]=i[t];return n}function i(e,r){for(var t=new Array(r),n=e.codec.decode,o=0;o<r;o++)t[o]=n(e);return t}function a(e,t){var n=e.offset,o=e.offset=n+t,i=e.buffer;if(o>i.length)throw new x;return P||!r.isBuffer(i)?k.readString.call(i,n,o):i.toString("utf-8",n,o)}function u(e,r){var t=e.offset,n=e.offset=t+r;if(n>e.buffer.length)throw new x;return v.call(e.buffer,t,n)}function s(e,r){var t=e.offset,n=e.offset=t+r+1;if(n>e.buffer.length)throw new x;var o=e.buffer[t],i=e.codec.getExtUnpacker(o);if(!i)throw new Error("Invalid ext type: "+(o?"0x"+o.toString(16):o));var a=v.call(e.buffer,t+1,n);return i(a)}function f(e){var r=e.buffer;if(e.offset>=r.length)throw new x;return r[e.offset++]}function c(e){var r=e.buffer;if(e.offset+2>r.length)throw new x;return r[e.offset++]<<8|r[e.offset++]}function l(e,r){return function(t){var n=t.offset,o=t.offset=n+e;if(o>t.buffer.length)throw new x;return r.call(t.buffer,n,U)}}function d(e){return new E(this,e).toNumber()}function p(e){return new A(this,e).toNumber()}function h(e){return new E(this,e)}function y(e){return new A(this,e)}function m(e){return this.readFloatBE?this.readFloatBE(e):w.read(this,e,!1,23,4)}function g(e){return this.readDoubleBE?this.readDoubleBE(e):w.read(this,e,!1,52,8)}function v(e,t){var n=this.slice||Array.prototype.slice,o=n.call(this,e,t);return r.isBuffer(o)||(o=r(o)),o}var w=e("ieee754"),b=e("int64-buffer"),E=b.Uint64BE,A=b.Int64BE;t.getReadFormat=n,t.readUint8=f;var k=e("./buffer-lite"),x=e("./buffer-shortage").BufferShortageError,P="TYPED_ARRAY_SUPPORT"in r,U=!0}).call(this,e("buffer").Buffer)},{"./buffer-lite":56,"./buffer-shortage":57,buffer:48,ieee754:52,"int64-buffer":53}],70:[function(e,r,t){function n(e){var r=f.getReadFormat(e);return e&&e.useraw?i(r):o(r)}function o(e){var r,t=new Array(256);for(r=0;r<=127;r++)t[r]=a(r);for(r=128;r<=143;r++)t[r]=s(r-128,e.map);for(r=144;r<=159;r++)t[r]=s(r-144,e.array);for(r=160;r<=191;r++)t[r]=s(r-160,e.str);for(t[192]=a(null),t[193]=null,t[194]=a(!1),t[195]=a(!0),t[196]=u(e.uint8,e.bin),t[197]=u(e.uint16,e.bin),t[198]=u(e.uint32,e.bin),t[199]=u(e.uint8,e.ext),t[200]=u(e.uint16,e.ext),t[201]=u(e.uint32,e.ext),t[202]=e.float32,t[203]=e.float64,t[204]=e.uint8,t[205]=e.uint16,t[206]=e.uint32,t[207]=e.uint64,t[208]=e.int8,t[209]=e.int16,t[210]=e.int32,t[211]=e.int64,t[212]=s(1,e.ext),t[213]=s(2,e.ext),t[214]=s(4,e.ext),t[215]=s(8,e.ext),t[216]=s(16,e.ext),t[217]=u(e.uint8,e.str),t[218]=u(e.uint16,e.str),t[219]=u(e.uint32,e.str),t[220]=u(e.uint16,e.array),t[221]=u(e.uint32,e.array),t[222]=u(e.uint16,e.map),t[223]=u(e.uint32,e.map),r=224;r<=255;r++)t[r]=a(r-256);return t}function i(e){var r,t=n(e).slice();for(t[217]=t[196],t[218]=t[197],t[219]=t[198],r=160;r<=191;r++)t[r]=s(r-160,e.bin);return t}function a(e){return function(){return e}}function u(e,r){return function(t){var n=e(t);return r(t,n)}}function s(e,r){return function(t){return r(t,e)}}var f=e("./read-format");t.getReadToken=n},{"./read-format":69}],71:[function(e,r,t){function n(e){function r(e,r){var n=t[typeof r];if(!n)throw new Error('Unsupported type "'+typeof r+'": '+r);n(e,r)}var t=o.getWriteType(e);return r}t.getEncoder=n;var o=e("./write-type")},{"./write-type":73}],72:[function(e,r,t){(function(r){function n(e){return p||e&&e.safe?i():o()}function o(){var e=l.slice();return e[196]=a(196),e[197]=u(197),e[198]=s(198),e[199]=a(199),e[200]=u(200),e[201]=s(201),e[202]=f(202,4,r.prototype.writeFloatBE,!0),e[203]=f(203,8,r.prototype.writeDoubleBE,!0),e[204]=a(204),e[205]=u(205),e[206]=s(206),e[207]=f(207,8,c.writeUint64BE),e[208]=a(208),e[209]=u(209),e[210]=s(210),e[211]=f(211,8,c.writeUint64BE),e[217]=a(217),e[218]=u(218),e[219]=s(219),e[220]=u(220),e[221]=s(221),e[222]=u(222),e[223]=s(223),e}function i(){var e=l.slice();return e[196]=f(196,1,r.prototype.writeUInt8),e[197]=f(197,2,r.prototype.writeUInt16BE),e[198]=f(198,4,r.prototype.writeUInt32BE),e[199]=f(199,1,r.prototype.writeUInt8),e[200]=f(200,2,r.prototype.writeUInt16BE),e[201]=f(201,4,r.prototype.writeUInt32BE),e[202]=f(202,4,r.prototype.writeFloatBE),e[203]=f(203,8,r.prototype.writeDoubleBE),e[204]=f(204,1,r.prototype.writeUInt8),e[205]=f(205,2,r.prototype.writeUInt16BE),e[206]=f(206,4,r.prototype.writeUInt32BE),e[207]=f(207,8,c.writeUint64BE),e[208]=f(208,1,r.prototype.writeInt8),e[209]=f(209,2,r.prototype.writeInt16BE),e[210]=f(210,4,r.prototype.writeInt32BE),e[211]=f(211,8,c.writeUint64BE),e[217]=f(217,1,r.prototype.writeUInt8),e[218]=f(218,2,r.prototype.writeUInt16BE),e[219]=f(219,4,r.prototype.writeUInt32BE),e[220]=f(220,2,r.prototype.writeUInt16BE),e[221]=f(221,4,r.prototype.writeUInt32BE),e[222]=f(222,2,r.prototype.writeUInt16BE),e[223]=f(223,4,r.prototype.writeUInt32BE),e}function a(e){return function(r,t){r.reserve(2);var n=r.buffer,o=r.offset;n[o++]=e,n[o++]=t,r.offset=o}}function u(e){return function(r,t){r.reserve(3);var n=r.buffer,o=r.offset;n[o++]=e,n[o++]=t>>>8,n[o++]=t,r.offset=o}}function s(e){return function(r,t){r.reserve(5);var n=r.buffer,o=r.offset;n[o++]=e,n[o++]=t>>>24,n[o++]=t>>>16,n[o++]=t>>>8,n[o++]=t,r.offset=o}}function f(e,r,t,n){return function(o,i){o.reserve(r+1),o.buffer[o.offset++]=e,t.call(o.buffer,i,o.offset,n),o.offset+=r}}var c=e("./buffer-lite"),l=e("./write-uint8").uint8,d="TYPED_ARRAY_SUPPORT"in r,p=d&&!r.TYPED_ARRAY_SUPPORT;t.getWriteToken=n}).call(this,e("buffer").Buffer)},{"./buffer-lite":56,"./write-uint8":74,buffer:48}],73:[function(e,r,t){(function(r){function n(e){function t(e,r){var t=r?195:194;x[t](e,r)}function n(e,r){var t,n=0|r;return r!==n?(t=203,void x[t](e,r)):(t=-32<=n&&n<=127?255&n:0<=n?n<=255?204:n<=65535?205:206:-128<=n?208:-32768<=n?209:210,void x[t](e,n))}function a(e,r){var t=207;x[t](e,r.toArray())}function p(e,r){var t=211;x[t](e,r.toArray())}function y(e,r){var t=r.length,n=5+3*t;e.reserve(n);var i=t<32?1:t<=255?2:t<=65535?3:5,a=e.offset+i;t=f.writeString.call(e.buffer,r,a);var u=t<32?1:t<=255?2:t<=65535?3:5;i!==u&&o(e,a,t,u-i);var s=1===u?160+t:u<=3?215+u:219;x[s](e,t),e.offset+=t}function m(e,t){if(null===t)return g(e,t);if(r.isBuffer(t))return w(e,t);if(i(t))return v(e,t);if(u.isUint64BE(t))return a(e,t);if(s.isInt64BE(t))return p(e,t);var n=e.codec.getExtPacker(t);return n&&(t=n(t)),t instanceof d?b(e,t):void E(e,t)}function g(e,r){var t=192;x[t](e,r)}function v(e,r){var t=r.length,n=t<16?144+t:t<=65535?220:221;x[n](e,t);for(var o=e.codec.encode,i=0;i<t;i++)o(e,r[i])}function w(e,r){var t=r.length,n=t<255?196:t<=65535?197:198;x[n](e,t),e.send(r)}function b(e,r){var t=r.buffer,n=t.length,o=h[n]||(n<255?199:n<=65535?200:201);x[o](e,n),l[r.type](e),e.send(t)}function E(e,r){var t=Object.keys(r),n=t.length,o=n<16?128+n:n<=65535?222:223;x[o](e,n);var i=e.codec.encode;t.forEach(function(t){i(e,t),i(e,r[t])})}function A(e,r){var t=r.length,n=5+3*t;e.reserve(n);var i=t<32?1:t<=65535?3:5,a=e.offset+i;t=f.writeString.call(e.buffer,r,a);var u=t<32?1:t<=65535?3:5;i!==u&&o(e,a,t,u-i);var s=t<32?160+t:t<=65535?218:219;x[s](e,t),e.offset+=t}function k(e,t){if(!r.isBuffer(t))return m(e,t);var n=t.length,o=n<32?160+n:n<=65535?218:219;x[o](e,n),e.send(t)}var x=c.getWriteToken(e),P={boolean:t,function:g,number:n,object:m,string:y,symbol:g,undefined:g};return e&&e.useraw&&(P.object=k,P.string=A),P}function o(e,r,t,n){var o=r+n,i=r+t;p?f.copy.call(e.buffer,e.buffer,o,r,i):e.buffer.copy(e.buffer,o,r,i)}var i=e("isarray"),a=e("int64-buffer"),u=a.Uint64BE,s=a.Int64BE,f=e("./buffer-lite"),c=e("./write-token"),l=e("./write-uint8").uint8,d=e("./ext-buffer").ExtBuffer,p="TYPED_ARRAY_SUPPORT"in r,h=[];h[1]=212,h[2]=213,h[4]=214,h[8]=215,h[16]=216,t.getWriteType=n}).call(this,e("buffer").Buffer)},{"./buffer-lite":56,"./ext-buffer":65,"./write-token":72,"./write-uint8":74,buffer:48,"int64-buffer":53,isarray:75}],74:[function(e,r,t){function n(e){return function(r){r.reserve(1),r.buffer[r.offset++]=e}}for(var o=t.uint8=new Array(256),i=0;i<=255;i++)o[i]=n(i)},{}],75:[function(e,r,t){arguments[4][49][0].apply(t,arguments)},{dup:49}]},{},[40]);
